(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";
var Http_1 = require('./Http');
var Page_1 = require('./Page');
var TestCase_1 = require('./TestCase');
var Router_1 = require('./Router');
var App = (function () {
    function App(config) {
        console.log('App starting ...');
        App.config = config;
        App.http = new Http_1.Http();
        this.router = new Router_1.Router();
        this.registerHandlebarsHelpers();
        this.router.addRoute('/', function () {
            Q.fcall(function () {
                var testCase = new TestCase_1.TestCase(TestCase_1.TestCase.createEmptyEntity());
                return new Page_1.Page(testCase);
            }).then(function (page) {
                page.render();
            });
        });
        this.router.addRoute('/test/{slug}', function (slug) {
            return App.http.getJSON(App.config.serverUri + "/test/" + slug + ".json").then(function (r) {
                var testCase = new TestCase_1.TestCase(r.getBody());
                return new Page_1.Page(testCase);
            }).then(function (page) {
                page.render();
            });
        });
        this.router.run();
    }
    App.prototype.registerHandlebarsHelpers = function () {
        Handlebars.registerHelper('if_eq', function (a, b, opts) {
            if (a === b) {
                return opts.fn(this);
            }
            else {
                return opts.inverse(this);
            }
        });
        Handlebars.registerHelper('if_sm', function (a, b, opts) {
            if (a < b) {
                return opts.fn(this);
            }
            else {
                return opts.inverse(this);
            }
        });
        Handlebars.registerHelper('timestamp', function () {
            return (new Date()).getTime();
        });
    };
    App.prototype.bindErrorLogging = function () {
        if (!('onerror' in window)) {
            return false;
        }
        var timeStamp = (new Date()).getTime();
        window.onerror = function (msg, url, lineNo, columnNo, error) {
            var diff = (new Date()).getTime() - timeStamp;
            var minutesDifference = Math.floor(diff / 1000 / 60);
            console.log('Minutes difference: ', minutesDifference);
            var errorDTO = {
                msg: msg,
                url: url || window.location.href,
                lineNo: lineNo,
                colNo: columnNo,
                trace: error.toString()
            };
            App.http.postJSON(App.config.serverUri + "/log.json", errorDTO).then(function () {
                timeStamp = (new Date()).getTime();
            });
        };
    };
    ;
    return App;
}());
exports.App = App;
},{"./Http":2,"./Page":3,"./Router":4,"./TestCase":6}],2:[function(require,module,exports){
"use strict";
var Http = (function () {
    function Http() {
    }
    Http.fromStringToJSON = function (str) {
        return str ? JSON.parse(str) : {};
    };
    Http.fromJSONToString = function (jsonObj) {
        return JSON.stringify(jsonObj);
    };
    Http.prototype.sendRequest = function (request) {
        var deferred = Q.defer();
        var xhr = typeof XMLHttpRequest !== 'undefined' ? new XMLHttpRequest() : null;
        xhr.open(request.getMethod(), request.getUrl(), true);
        (function (headers) {
            for (var i in headers) {
                if (headers.hasOwnProperty(i)) {
                    xhr.setRequestHeader(i, headers[i]);
                }
            }
        })(request.getHeaders());
        xhr.onload = function () {
            var response;
            if (xhr.readyState === Http.XHR_DONE) {
                response = this.response = new Response(xhr.status, xhr.response);
                if (xhr.status === Http.HTTP_SUCCESS || xhr.status === Http.HTTP_CREATED) {
                    deferred.resolve(response);
                }
                else {
                    deferred.reject(response);
                }
            }
        }.bind(this);
        if (request.getBody()) {
            xhr.send(request.getBody());
        }
        else {
            xhr.send();
        }
        return deferred.promise;
    };
    Object.defineProperty(Http.prototype, "request", {
        get: function () {
            return this._request;
        },
        set: function (request) {
            this._request = request;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Http.prototype, "response", {
        get: function () {
            return this._response;
        },
        set: function (response) {
            this._response = response;
        },
        enumerable: true,
        configurable: true
    });
    Http.prototype.send = function (method, url, body) {
        return this.sendRequest(new Request(method, url, null, body));
    };
    Http.prototype.getJSON = function (url) {
        return this.sendRequest(new Request('GET', url, { 'Content-Type': 'application/json', 'Accept': 'application/json' }, null)).then(function (response) {
            response.setBody(Http.fromStringToJSON(response.getBody()));
            return response;
        });
    };
    ;
    Http.prototype.postJSON = function (url, body) {
        var bodyString = Http.fromJSONToString(body);
        return this.sendRequest(new Request('POST', url, { 'Content-Type': 'application/json', 'Accept': 'application/json' }, bodyString));
    };
    ;
    Http.prototype.getHTML = function (url) {
        return this.sendRequest(new Request('GET', url, { 'Content-Type': 'text/html', 'Accept': 'text/html' }, null));
    };
    ;
    Http.HTTP_SUCCESS = 200;
    Http.HTTP_CREATED = 201;
    Http.HTTP_NOT_FOUND = 404;
    Http.HTTP_BAD_REQUEST = 400;
    Http.XHR_UNSENT = 0;
    Http.XHR_OPENED = 1;
    Http.XHR_HEADERS_RECEIVED = 2;
    Http.XHR_LOADING = 3;
    Http.XHR_DONE = 4;
    return Http;
}());
exports.Http = Http;
var Request = (function () {
    function Request(method, url, headers, body) {
        this.method = method;
        this.url = url;
        this.headers = headers || {};
        this.body = body;
    }
    ;
    Request.prototype.getMethod = function () {
        return this.method;
    };
    ;
    Request.prototype.getUrl = function () {
        return this.url;
    };
    ;
    Request.prototype.getHeaders = function () {
        return this.headers;
    };
    ;
    Request.prototype.getBody = function () {
        return this.body;
    };
    ;
    return Request;
}());
var Response = (function () {
    function Response(status, body) {
        this.status = status;
        this.body = body;
        this.bodyRaw = body;
    }
    ;
    Response.prototype.setStatus = function (status) {
        this.status = status;
    };
    ;
    Response.prototype.getStatus = function () {
        return this.status;
    };
    ;
    Response.prototype.setBody = function (body) {
        this.body = body;
    };
    ;
    Response.prototype.getBody = function () {
        return this.body;
    };
    ;
    Response.prototype.getBodyRaw = function () {
        return this.bodyRaw;
    };
    return Response;
}());
},{}],3:[function(require,module,exports){
"use strict";
var TestCase_1 = require('./TestCase');
var App_1 = require('./App');
var Runner_1 = require('./Runner');
var TotalChartPanel_1 = require('./TotalChartPanel');
var Page = (function () {
    function Page(testCase) {
        console.log('TestCase constructor ...');
        this.testCase = testCase;
    }
    Page.renderElem = function (id, html, data) {
        var $elem = document.getElementById(id);
        var template = Handlebars.compile(html);
        $elem.innerHTML = template(data);
    };
    Page.prototype.render = function () {
        var _this = this;
        App_1.App.http.getHTML(App_1.App.config.clientUri + '/tpl/testcase-sidebar-form.hbs')
            .then(function (r) {
            Page.renderElem('testcase-sidebar-form', r.getBody(), _this.testCase);
        })
            .then(function () {
            _this.bindSaveBtn();
            _this.bindRunBtn();
        });
        Q.spread([
            App_1.App.http.getJSON(App_1.App.config.serverUri + '/tests.json?exclude=revision_number,description,harness,entries,status&orderBy=latest&limit=25'),
            App_1.App.http.getHTML(App_1.App.config.clientUri + '/tpl/testcase-sidebar-listing.hbs')
        ], function (dataR, tplR) {
            Page.renderElem('testcase-sidebar-listing', dataR.getBody(), tplR.getBody());
        });
        Q.spread([
            App_1.App.http.getHTML(App_1.App.config.clientUri + '/tpl/testcase-entry-form.hbs'),
            App_1.App.http.getHTML(App_1.App.config.clientUri + '/tpl/testcase-main-form.hbs')
        ], function (tplEntryR, tplMainR) {
            Handlebars.registerPartial('entry', tplEntryR.getBody());
            Page.renderElem('testcase-main-form', tplMainR.getBody(), _this.testCase);
        }).then(function () {
            _this.bindAddTestEntryBtn();
        });
    };
    Page.prototype.renderChartPanel = function () {
        var panel = new TotalChartPanel_1.TotalChartPanel(this, this.testCase);
        panel.getData().then(function (r) {
            panel.render(r.getBody());
        }, function (error) {
            console.error('renderChartPanel():', error);
        });
    };
    ;
    Page.prototype.bindSaveBtn = function () {
        var $saveBtn = document.getElementById('save-testcase-button');
        $saveBtn.addEventListener('click', function (e) {
            e.preventDefault();
            Page.toggleRenderBtn('save-testcase-button', 'disable');
            var testCaseDTO = TestCase_1.TestCase.createEntityFromDOMElement('wrapper');
            testCaseDTO.env = {
                browserName: platform.name,
                browserVersion: platform.version,
                os: platform.os
            };
            App_1.App.http.postJSON(App_1.App.config.serverUri + '/tests.json', testCaseDTO)
                .then(function () {
                Page.toggleRenderBtn('save-testcase-button', 'activate');
            });
        });
    };
    Page.prototype.bindRunBtn = function () {
        var _page = this;
        var $runBtn = document.getElementById('run-testcase-button');
        $runBtn.addEventListener('click', function (e) {
            e.preventDefault();
            Page.toggleRenderBtn('run-testcase-button', 'disable');
            var testCaseDTO = TestCase_1.TestCase.createEntityFromDOMElement('wrapper');
            testCaseDTO.env = {
                browserName: platform.name,
                browserVersion: platform.version,
                os: platform.os
            };
            App_1.App.http.getHTML(App_1.App.config.clientUri + "/tpl/testcase-results-table.hbs")
                .then(function (r) {
                Page.renderElem('results', r.getBody(), testCaseDTO);
                var runner = new Runner_1.Runner(new TestCase_1.TestCase(testCaseDTO));
                runner.run().then(function (results) {
                    Page.toggleRenderBtn('run-testcase-button', 'activate');
                    _page.sendResults(results);
                    console.log('Rendering Chart Panel ...');
                    _page.renderChartPanel();
                }, function (error) {
                    console.error(error);
                });
            });
        }, false);
    };
    Page.prototype.bindAddTestEntryBtn = function () {
        var _this = this;
        var $btn = document.getElementById('add-test-link');
        $btn.addEventListener('click', function (e) {
            e.preventDefault();
            console.log('click?');
            App_1.App.http.getHTML(App_1.App.config.clientUri + "/tpl/testcase-entry-form.hbs").then(function (response) {
                var entryId = Page.getNextTestCaseEntryId();
                var newTestEntry = TestCase_1.TestCase.createEmptyTestCaseEntry(entryId);
                _this.testCase.addEntry(newTestEntry);
                var template = Handlebars.compile(response.getBody());
                var html = template(newTestEntry);
                var $newEntry = document.createElement('div');
                $newEntry.innerHTML = html;
                var $entries = document.getElementById('entries');
                $entries.appendChild($newEntry.firstChild);
                _this.bindRemoveTestEntryBtn(entryId);
            });
        });
    };
    ;
    Page.prototype.bindRemoveTestEntryBtn = function (entryId) {
        var _this = this;
        var $entries = document.getElementById('entries');
        var $entry = document.getElementById('testcase-test-' + entryId);
        var $button = $entry.getElementsByClassName('testcase-test-remove');
        $button[0].addEventListener('click', function (e) {
            console.log('click?');
            _this.testCase.removeEntry(entryId);
            $entries.removeChild($entry);
        });
    };
    ;
    Page.getNextTestCaseEntryId = function () {
        return document.getElementsByClassName('testcase-test').length + 1;
    };
    Page.toggleRenderBtn = function (id, status) {
        var $btn = document.getElementById(id);
        if (status === 'activate') {
            $btn.classList.remove('btn-loading');
            $btn.disabled = false;
        }
        else {
            $btn.className += ' btn-loading';
            $btn.disabled = true;
        }
    };
    Page.prototype.sendResults = function (results) {
        var testCaseDTO = TestCase_1.TestCase.createEntityFromDOMElement('wrapper');
        for (var i in results) {
            if (!results.hasOwnProperty(i)) {
                continue;
            }
            testCaseDTO.entries[i].results = results[i];
        }
        testCaseDTO.env = {
            browserName: platform.name,
            browserVersion: platform.version,
            os: platform.os
        };
        console.log(testCaseDTO, JSON.stringify(testCaseDTO));
        this.testCase = TestCase_1.TestCase.create(testCaseDTO);
        return App_1.App.http.postJSON(App_1.App.config.serverUri + "/tests.json", testCaseDTO);
    };
    ;
    return Page;
}());
exports.Page = Page;
},{"./App":1,"./Runner":5,"./TestCase":6,"./TotalChartPanel":7}],4:[function(require,module,exports){
"use strict";
var Router = (function () {
    function Router() {
        this.routes = [];
    }
    Router.prototype.run = function (customPath) {
        var path = customPath ? customPath : window.location.pathname;
        var route = this.matchRoute(path);
        if (route) {
            return route.action.apply(null, route.args);
        }
        else {
            return new Error('No valid route found.');
        }
    };
    Router.prototype.addRoute = function (path, action) {
        if (!path || !action) {
            return false;
        }
        this.routes.push({
            path: path,
            action: action
        });
    };
    Router.prototype.matchRoute = function (path) {
        var matchFound;
        for (var i = 0; i < this.routes.length; i++) {
            matchFound = path.match(new RegExp(Router.preparePath(this.routes[i].path), 'i'));
            if (matchFound) {
                var args = matchFound.slice(1, matchFound.length);
                return {
                    path: this.routes[i].path,
                    action: this.routes[i].action,
                    args: args,
                    requestedPath: path
                };
            }
        }
    };
    Router.preparePath = function (path) {
        return path.replace(/{[a-z]+}/g, '([a-z0-9]+)');
    };
    return Router;
}());
exports.Router = Router;
},{}],5:[function(require,module,exports){
"use strict";
var Runner = (function () {
    function Runner(testCase) {
        this.testCase = testCase;
    }
    Runner.prototype.run = function () {
        if (!this.testCase.isReadyToRun()) {
            throw new Error('You need to have at least two code entries in order to run the test case.');
        }
        console.log('Starting runner ...');
        return this.startBench();
    };
    Runner.prototype.startBench = function () {
        var deferredQ = Q.defer();
        var testCase = this.testCase;
        var benches = [];
        var bench;
        var results = {};
        for (var j in testCase.entries) {
            if (!testCase.entries.hasOwnProperty(j)) {
                continue;
            }
            bench = new Benchmark(testCase.entries[j].title, {
                id: j,
                async: true,
                setup: testCase.harness.setUp,
                teardown: testCase.harness.tearDown,
                fn: testCase.entries[j].code,
                onStart: function (e) {
                    var benchResult = e.target;
                    Runner.renderResult(benchResult.id, 'Starting ...');
                },
                onComplete: function (e) {
                    var benchResult = e.target;
                    results[benchResult.id] = {
                        id: benchResult.id,
                        error: benchResult.error ? Benchmark.join(benchResult.error) : null,
                        opsPerSec: benchResult.hz.toFixed(benchResult.hz < 100 ? 2 : 0),
                        opsPerSecFormatted: Benchmark.formatNumber(benchResult.hz.toFixed(benchResult.hz < 100 ? 2 : 0)),
                        pm: benchResult.stats.rme.toFixed(2),
                        runSamples: benchResult.stats.sample.length
                    };
                    Runner.renderResult(benchResult.id, results[benchResult.id].opsPerSecFormatted + ' (&plusmn;' + results[benchResult.id].pm + ')');
                }
            });
            benches.push(bench);
        }
        setTimeout(function () {
            Benchmark.invoke(benches, {
                name: 'run',
                args: true,
                onStart: function (e) {
                    console.log('Starting benchmarks ...', e);
                },
                onCycle: function (e) {
                    console.log('onCycle here.', e);
                },
                onError: function (e) {
                    console.log('onError here.', e);
                    deferredQ.reject(new Error('Running suite returned an error.'));
                },
                onComplete: function (e) {
                    console.log('onComplete here.', e, results);
                    Runner.renderWinnerResult(Benchmark.filter(benches, 'fastest')[0].id);
                    Runner.renderLoserResult(Benchmark.filter(benches, 'slowest')[0].id);
                    deferredQ.resolve(results);
                }
            });
        }, 2000);
        console.log('aici');
        return deferredQ.promise;
    };
    Runner.renderResult = function (id, text) {
        var $elem = document.getElementById('testcase-test-result-text-' + id);
        $elem.innerHTML = text;
    };
    ;
    Runner.renderWinnerResult = function (id) {
        var $elem = document.getElementById('testcase-test-result-text-' + id);
        $elem.className += ' success';
    };
    ;
    Runner.renderLoserResult = function (id) {
        var $elem = document.getElementById('testcase-test-result-text-' + id);
        $elem.className += ' danger';
    };
    ;
    return Runner;
}());
exports.Runner = Runner;
},{}],6:[function(require,module,exports){
"use strict";
var Utils_1 = require('./Utils');
var TestCase = (function () {
    function TestCase(testCase) {
        this.title = testCase.title;
        this.slug = testCase.slug;
        this.description = testCase.description;
        this.status = testCase.status;
        this.harness = testCase.harness;
        this.entries = testCase.entries;
        this.env = testCase.env;
    }
    Object.defineProperty(TestCase.prototype, "title", {
        get: function () {
            return this._title;
        },
        set: function (title) {
            this._title = title;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TestCase.prototype, "slug", {
        get: function () {
            return this._slug;
        },
        set: function (slug) {
            this._slug = slug;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TestCase.prototype, "description", {
        get: function () {
            return this._description;
        },
        set: function (description) {
            this._description = description;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TestCase.prototype, "status", {
        get: function () {
            return this._status;
        },
        set: function (status) {
            this._status = status;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TestCase.prototype, "harness", {
        get: function () {
            return this._harness;
        },
        set: function (harness) {
            this._harness = harness;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TestCase.prototype, "entries", {
        get: function () {
            return this._entries;
        },
        set: function (entries) {
            this._entries = entries;
        },
        enumerable: true,
        configurable: true
    });
    TestCase.prototype.addEntry = function (entry) {
        this._entries[entry.id] = entry;
    };
    TestCase.prototype.removeEntry = function (id) {
        delete this._entries[id];
    };
    Object.defineProperty(TestCase.prototype, "env", {
        get: function () {
            return this._env;
        },
        set: function (env) {
            this._env = env;
        },
        enumerable: true,
        configurable: true
    });
    TestCase.prototype.isReadyToRun = function () {
        return (Utils_1.Util.getObjLength(this.entries) > 2);
    };
    TestCase.create = function (testCaseEntity) {
        return new TestCase(testCaseEntity);
    };
    TestCase.createEmptyEntity = function () {
        return {
            title: '',
            slug: Utils_1.Util.randomString(10),
            description: '',
            status: 'public',
            harness: {
                html: '',
                setUp: '',
                tearDown: ''
            },
            entries: [
                { id: 1, title: '', code: '' },
                { id: 2, title: '', code: '' }
            ]
        };
    };
    TestCase.createEntityFromDOMElement = function (id) {
        var $elem = document.getElementById(id);
        var result = formToObject($elem);
        return result.testCase;
    };
    TestCase.createEmptyTestCaseEntry = function (id) {
        return {
            id: id,
            title: '',
            code: ''
        };
    };
    return TestCase;
}());
exports.TestCase = TestCase;
},{"./Utils":8}],7:[function(require,module,exports){
"use strict";
var App_1 = require('./App');
var TotalChartPanel = (function () {
    function TotalChartPanel(page, testCase) {
        this.page = page;
        this.testCase = testCase;
    }
    TotalChartPanel.prototype.getData = function () {
        return App_1.App.http.getJSON(App_1.App.config.serverUri + "/test/" + this.testCase.slug + "/totals/by-browser.json");
    };
    TotalChartPanel.prototype.render = function (data) {
        var _this = this;
        var $chartDiv = document.getElementById('chart-div');
        if ($chartDiv.className === 'rendered') {
            this._render(data);
        }
        else {
            google.charts.load('current', { packages: ['corechart', 'bar'] });
            google.charts.setOnLoadCallback(function () {
                _this._render(data);
            });
        }
    };
    TotalChartPanel.prototype._render = function (data) {
        var $chartDiv = document.getElementById('chart-div');
        var chart = new google.visualization.BarChart($chartDiv);
        var browsers = [];
        var resultsSet = [];
        data.map(function (entry) {
            var entryResults = {
                title: entry.title
            };
            entry.totals.forEach(function (total) {
                var browserIdentifier = total.browserName;
                if (browsers.indexOf(browserIdentifier) === -1) {
                    browsers.push(browserIdentifier);
                }
                entryResults[browserIdentifier] = parseInt(total.metricValue);
            });
            resultsSet.push(_.map(entryResults));
        });
        browsers.unshift('Total');
        resultsSet.unshift(browsers);
        var options = {
            legend: {
                position: 'bottom'
            },
            bars: 'horizontal',
            chartArea: {
                width: '80%',
                'height': '80%'
            }
        };
        chart.draw(google.visualization.arrayToDataTable(resultsSet), options);
        $chartDiv.className = 'rendered';
    };
    return TotalChartPanel;
}());
exports.TotalChartPanel = TotalChartPanel;
},{"./App":1}],8:[function(require,module,exports){
"use strict";
var Util = (function () {
    function Util() {
    }
    Util.randomString = function (len, charSet) {
        charSet = charSet || 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
        var randomString = '';
        for (var i = 0; i < len; i++) {
            var randomPoz = Math.floor(Math.random() * charSet.length);
            randomString += charSet.substring(randomPoz, randomPoz + 1);
        }
        return randomString;
    };
    Util.getObjLength = function (o) {
        if (typeof o !== 'object' || o === null) {
            return 0;
        }
        var l = 0;
        var k;
        if (typeof Object.keys === 'function') {
            l = Object.keys(o).length;
        }
        else {
            for (k in o) {
                if (o.hasOwnProperty(k)) {
                    l++;
                }
            }
        }
        return l;
    };
    Util.escapeForRegex = function (str) {
        return str.replace(/[-\/\\^$*+?.()|[\]]/g, '\\$&');
    };
    return Util;
}());
exports.Util = Util;
},{}],9:[function(require,module,exports){
"use strict";
var App_1 = require('./App');
new App_1.App({
    serverUri: 'http://api-dev.jsbench.org/v2',
    clientUri: 'http://' + window.location.host
});
},{"./App":1}]},{},[9])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJ0cy9BcHAudHMiLCJ0cy9IdHRwLnRzIiwidHMvUGFnZS50cyIsInRzL1JvdXRlci50cyIsInRzL1J1bm5lci50cyIsInRzL1Rlc3RDYXNlLnRzIiwidHMvVG90YWxDaGFydFBhbmVsLnRzIiwidHMvVXRpbHMudHMiLCJ0cy9pbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7QUNBQSxxQkFBMEMsUUFBUSxDQUFDLENBQUE7QUFDbkQscUJBQW1CLFFBQVEsQ0FBQyxDQUFBO0FBQzVCLHlCQUF1QyxZQUFZLENBQUMsQ0FBQTtBQUNwRCx1QkFBcUIsVUFBVSxDQUFDLENBQUE7QUFFaEM7SUFLSSxhQUFtQixNQUEwQjtRQUN6QyxPQUFPLENBQUMsR0FBRyxDQUFDLGtCQUFrQixDQUFDLENBQUM7UUFDaEMsR0FBRyxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7UUFDcEIsR0FBRyxDQUFDLElBQUksR0FBRyxJQUFJLFdBQUksRUFBRSxDQUFDO1FBQ3RCLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxlQUFNLEVBQUUsQ0FBQztRQUMzQixJQUFJLENBQUMseUJBQXlCLEVBQUUsQ0FBQztRQUdqQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxHQUFHLEVBQUU7WUFDdEIsQ0FBQyxDQUFDLEtBQUssQ0FBQztnQkFDSixJQUFJLFFBQVEsR0FBRyxJQUFJLG1CQUFRLENBQUMsbUJBQVEsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUM7Z0JBQzFELE1BQU0sQ0FBQyxJQUFJLFdBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUM5QixDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBUyxJQUFVO2dCQUN2QixJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7WUFDbEIsQ0FBQyxDQUFDLENBQUM7UUFDUCxDQUFDLENBQUMsQ0FBQztRQUVI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RCxvQkFBa0IsT0FBTyxDQUFDLENBQUE7QUFFMUIsSUFBSSxTQUFHLENBQUM7SUFDSixTQUFTLEVBQUUsK0JBQStCO0lBQzFDLFNBQVMsRUFBRSxTQUFTLEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJO0NBQzlDLENBQUMsQ0FBQyIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJpbXBvcnQge0h0dHAsIEh0dHBSZXNwb25zZUludGVyZmFjZX0gZnJvbSAnLi9IdHRwJztcclxuaW1wb3J0IHtQYWdlfSBmcm9tICcuL1BhZ2UnO1xyXG5pbXBvcnQge1Rlc3RDYXNlLCBUZXN0Q2FzZUVudGl0eX0gZnJvbSAnLi9UZXN0Q2FzZSc7XHJcbmltcG9ydCB7Um91dGVyfSBmcm9tICcuL1JvdXRlcic7XHJcblxyXG5leHBvcnQgY2xhc3MgQXBwIHtcclxuICAgIHB1YmxpYyBzdGF0aWMgY29uZmlnOiBBcHBDb25maWdJbnRlcmZhY2U7XHJcbiAgICBwdWJsaWMgc3RhdGljIGh0dHA6IEh0dHA7XHJcbiAgICBwdWJsaWMgcm91dGVyOiBSb3V0ZXI7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKGNvbmZpZzogQXBwQ29uZmlnSW50ZXJmYWNlKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ0FwcCBzdGFydGluZyAuLi4nKTtcclxuICAgICAgICBBcHAuY29uZmlnID0gY29uZmlnO1xyXG4gICAgICAgIEFwcC5odHRwID0gbmV3IEh0dHAoKTtcclxuICAgICAgICB0aGlzLnJvdXRlciA9IG5ldyBSb3V0ZXIoKTtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVySGFuZGxlYmFyc0hlbHBlcnMoKTtcclxuXHJcbiAgICAgICAgLy8gQWRkICdkZWZhdWx0JyByb3V0ZXMuXHJcbiAgICAgICAgdGhpcy5yb3V0ZXIuYWRkUm91dGUoJy8nLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgUS5mY2FsbChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0ZXN0Q2FzZSA9IG5ldyBUZXN0Q2FzZShUZXN0Q2FzZS5jcmVhdGVFbXB0eUVudGl0eSgpKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUGFnZSh0ZXN0Q2FzZSk7XHJcbiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24ocGFnZTogUGFnZSkge1xyXG4gICAgICAgICAgICAgICAgcGFnZS5yZW5kZXIoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMucm91dGVyLmFkZFJvdXRlKCcvdGVzdC97c2x1Z30nLCBmdW5jdGlvbihzbHVnOiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIEFwcC5odHRwLmdldEpTT04oYCR7QXBwLmNvbmZpZy5zZXJ2ZXJVcml9L3Rlc3QvJHtzbHVnfS5qc29uYCkudGhlbihmdW5jdGlvbiAocjogSHR0cFJlc3BvbnNlSW50ZXJmYWNlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGVzdENhc2UgPSBuZXcgVGVzdENhc2UoPFRlc3RDYXNlRW50aXR5PnIuZ2V0Qm9keSgpKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUGFnZSh0ZXN0Q2FzZSk7XHJcbiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24ocGFnZTogUGFnZSkge1xyXG4gICAgICAgICAgICAgICAgcGFnZS5yZW5kZXIoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMucm91dGVyLnJ1bigpO1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCByZWdpc3RlckhhbmRsZWJhcnNIZWxwZXJzKCkge1xyXG4gICAgICAgIEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ2lmX2VxJywgZnVuY3Rpb24oYTogYW55LCBiOiBhbnksIG9wdHM6IGFueSkge1xyXG4gICAgICAgICAgICBpZiAoYSA9PT0gYikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9wdHMuZm4odGhpcyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb3B0cy5pbnZlcnNlKHRoaXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ2lmX3NtJywgZnVuY3Rpb24oYTogYW55LCBiOiBhbnksIG9wdHM6IGFueSkge1xyXG4gICAgICAgICAgICBpZiAoYSA8IGIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBvcHRzLmZuKHRoaXMpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9wdHMuaW52ZXJzZSh0aGlzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCd0aW1lc3RhbXAnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIChuZXcgRGF0ZSgpKS5nZXRUaW1lKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGJpbmRFcnJvckxvZ2dpbmcoKSB7XHJcbiAgICAgICAgaWYgKCEoJ29uZXJyb3InIGluIHdpbmRvdykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIHRpbWVTdGFtcCA9IChuZXcgRGF0ZSgpKS5nZXRUaW1lKCk7XHJcblxyXG4gICAgICAgIHdpbmRvdy5vbmVycm9yID0gZnVuY3Rpb24obXNnLCB1cmwsIGxpbmVObywgY29sdW1uTm8sIGVycm9yKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgZGlmZiA9IChuZXcgRGF0ZSgpKS5nZXRUaW1lKCkgLSB0aW1lU3RhbXA7XHJcbiAgICAgICAgICAgIHZhciBtaW51dGVzRGlmZmVyZW5jZSA9IE1hdGguZmxvb3IoZGlmZiAvIDEwMDAgLyA2MCk7XHJcblxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnTWludXRlcyBkaWZmZXJlbmNlOiAnLCBtaW51dGVzRGlmZmVyZW5jZSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgZXJyb3JEVE8gPSB7XHJcbiAgICAgICAgICAgICAgICBtc2c6IG1zZyxcclxuICAgICAgICAgICAgICAgIHVybDogdXJsIHx8IHdpbmRvdy5sb2NhdGlvbi5ocmVmLFxyXG4gICAgICAgICAgICAgICAgbGluZU5vOiBsaW5lTm8sXHJcbiAgICAgICAgICAgICAgICBjb2xObzogY29sdW1uTm8sXHJcbiAgICAgICAgICAgICAgICB0cmFjZTogZXJyb3IudG9TdHJpbmcoKVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgQXBwLmh0dHAucG9zdEpTT04oYCR7QXBwLmNvbmZpZy5zZXJ2ZXJVcml9L2xvZy5qc29uYCwgZXJyb3JEVE8pLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB0aW1lU3RhbXAgPSAobmV3IERhdGUoKSkuZ2V0VGltZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxufVxyXG5cclxuaW50ZXJmYWNlIEFwcENvbmZpZ0ludGVyZmFjZSB7XHJcbiAgICBzZXJ2ZXJVcmk6IHN0cmluZztcclxuICAgIGNsaWVudFVyaTogc3RyaW5nO1xyXG59XHJcbiIsImltcG9ydCBQcm9taXNlID0gUS5Qcm9taXNlO1xyXG5leHBvcnQgY2xhc3MgSHR0cCB7XHJcbiAgICBwcm90ZWN0ZWQgX3JlcXVlc3Q6IEh0dHBSZXF1ZXN0SW50ZXJmYWNlO1xyXG4gICAgcHJvdGVjdGVkIF9yZXNwb25zZTogSHR0cFJlc3BvbnNlSW50ZXJmYWNlO1xyXG5cclxuICAgIC8vIEhUVFAgY29kZXMuXHJcbiAgICBwdWJsaWMgc3RhdGljIEhUVFBfU1VDQ0VTUzogbnVtYmVyID0gMjAwO1xyXG4gICAgcHVibGljIHN0YXRpYyBIVFRQX0NSRUFURUQ6IG51bWJlciA9IDIwMTtcclxuICAgIHB1YmxpYyBzdGF0aWMgSFRUUF9OT1RfRk9VTkQ6IG51bWJlciA9IDQwNDtcclxuICAgIHB1YmxpYyBzdGF0aWMgSFRUUF9CQURfUkVRVUVTVDogbnVtYmVyID0gNDAwO1xyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgWEhSX1VOU0VOVDogbnVtYmVyID0gMDtcclxuICAgIHB1YmxpYyBzdGF0aWMgWEhSX09QRU5FRDogbnVtYmVyID0gMTtcclxuICAgIHB1YmxpYyBzdGF0aWMgWEhSX0hFQURFUlNfUkVDRUlWRUQ6IG51bWJlciA9IDI7XHJcbiAgICBwdWJsaWMgc3RhdGljIFhIUl9MT0FESU5HOiBudW1iZXIgPSAzO1xyXG4gICAgcHVibGljIHN0YXRpYyBYSFJfRE9ORTogbnVtYmVyID0gNDtcclxuXHJcbiAgICBwcm90ZWN0ZWQgc3RhdGljIGZyb21TdHJpbmdUb0pTT04oc3RyOiBzdHJpbmcpOiBPYmplY3Qge1xyXG4gICAgICAgIHJldHVybiBzdHIgPyBKU09OLnBhcnNlKHN0cikgOiB7fTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgc3RhdGljIGZyb21KU09OVG9TdHJpbmcoanNvbk9iajogT2JqZWN0KTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoanNvbk9iaik7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNlbmRSZXF1ZXN0KHJlcXVlc3Q6IEh0dHBSZXF1ZXN0SW50ZXJmYWNlKTogUHJvbWlzZTxIdHRwUmVzcG9uc2VJbnRlcmZhY2U+IHtcclxuICAgICAgICB2YXIgZGVmZXJyZWQgPSBRLmRlZmVyPEh0dHBSZXNwb25zZUludGVyZmFjZT4oKTtcclxuICAgICAgICB2YXIgeGhyID0gdHlwZW9mIFhNTEh0dHBSZXF1ZXN0ICE9PSAndW5kZWZpbmVkJyA/IG5ldyBYTUxIdHRwUmVxdWVzdCgpIDogbnVsbDtcclxuICAgICAgICB4aHIub3BlbihyZXF1ZXN0LmdldE1ldGhvZCgpLCByZXF1ZXN0LmdldFVybCgpLCB0cnVlKTtcclxuXHJcbiAgICAgICAgKGZ1bmN0aW9uKGhlYWRlcnM6IEh0dHBIZWFkZXJzSW50ZXJmYWNlKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgaW4gaGVhZGVycykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGhlYWRlcnMuaGFzT3duUHJvcGVydHkoaSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihpLCBoZWFkZXJzW2ldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pKHJlcXVlc3QuZ2V0SGVhZGVycygpKTtcclxuXHJcbiAgICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgcmVzcG9uc2U6IEh0dHBSZXNwb25zZUludGVyZmFjZTtcclxuICAgICAgICAgICAgaWYgKHhoci5yZWFkeVN0YXRlID09PSBIdHRwLlhIUl9ET05FKSB7XHJcbiAgICAgICAgICAgICAgICByZXNwb25zZSA9IHRoaXMucmVzcG9uc2UgPSBuZXcgUmVzcG9uc2UoeGhyLnN0YXR1cywgeGhyLnJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgIGlmICh4aHIuc3RhdHVzID09PSBIdHRwLkhUVFBfU1VDQ0VTUyB8fCB4aHIuc3RhdHVzID09PSBIdHRwLkhUVFBfQ1JFQVRFRCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZWplY3QocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfS5iaW5kKHRoaXMpO1xyXG5cclxuICAgICAgICBpZiAocmVxdWVzdC5nZXRCb2R5KCkpIHtcclxuICAgICAgICAgICAgeGhyLnNlbmQocmVxdWVzdC5nZXRCb2R5KCkpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHhoci5zZW5kKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IHJlcXVlc3QoKTogSHR0cFJlcXVlc3RJbnRlcmZhY2Uge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXQgcmVxdWVzdChyZXF1ZXN0OiBIdHRwUmVxdWVzdEludGVyZmFjZSkge1xyXG4gICAgICAgIHRoaXMuX3JlcXVlc3QgPSByZXF1ZXN0O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgcmVzcG9uc2UoKTogSHR0cFJlc3BvbnNlSW50ZXJmYWNlIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcmVzcG9uc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldCByZXNwb25zZShyZXNwb25zZTogSHR0cFJlc3BvbnNlSW50ZXJmYWNlKSB7XHJcbiAgICAgICAgdGhpcy5fcmVzcG9uc2UgPSByZXNwb25zZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2VuZChtZXRob2Q6IHN0cmluZywgdXJsOiBzdHJpbmcsIGJvZHk6IHN0cmluZykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNlbmRSZXF1ZXN0KFxyXG4gICAgICAgICAgICBuZXcgUmVxdWVzdChtZXRob2QsIHVybCwgbnVsbCwgYm9keSlcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRKU09OKHVybDogc3RyaW5nKTogUHJvbWlzZTxIdHRwUmVzcG9uc2VJbnRlcmZhY2U+IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zZW5kUmVxdWVzdChcclxuICAgICAgICAgICAgbmV3IFJlcXVlc3QoJ0dFVCcsIHVybCwgeydDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbid9LCBudWxsKVxyXG4gICAgICAgICkudGhlbihmdW5jdGlvbihyZXNwb25zZTogSHR0cFJlc3BvbnNlSW50ZXJmYWNlKSB7XHJcbiAgICAgICAgICAgIHJlc3BvbnNlLnNldEJvZHkoXHJcbiAgICAgICAgICAgICAgICBIdHRwLmZyb21TdHJpbmdUb0pTT04oPHN0cmluZz5yZXNwb25zZS5nZXRCb2R5KCkpXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgcHVibGljIHBvc3RKU09OKHVybDogc3RyaW5nLCBib2R5OiBPYmplY3QpIHtcclxuICAgICAgICB2YXIgYm9keVN0cmluZyA9IEh0dHAuZnJvbUpTT05Ub1N0cmluZyhib2R5KTtcclxuICAgICAgICByZXR1cm4gdGhpcy5zZW5kUmVxdWVzdChcclxuICAgICAgICAgICAgbmV3IFJlcXVlc3QoJ1BPU1QnLCB1cmwsIHsnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLCAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nfSwgYm9keVN0cmluZylcclxuICAgICAgICApO1xyXG4gICAgfTtcclxuXHJcbiAgICBwdWJsaWMgZ2V0SFRNTCh1cmw6IHN0cmluZykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNlbmRSZXF1ZXN0KFxyXG4gICAgICAgICAgICBuZXcgUmVxdWVzdCgnR0VUJywgdXJsLCB7J0NvbnRlbnQtVHlwZSc6ICd0ZXh0L2h0bWwnLCAnQWNjZXB0JzogJ3RleHQvaHRtbCd9LCBudWxsKVxyXG4gICAgICAgICk7XHJcbiAgICB9O1xyXG59XHJcblxyXG5jbGFzcyBSZXF1ZXN0IGltcGxlbWVudHMgSHR0cFJlcXVlc3RJbnRlcmZhY2Uge1xyXG4gICAgcHJvdGVjdGVkIG1ldGhvZDogc3RyaW5nO1xyXG4gICAgcHJvdGVjdGVkIHVybDogc3RyaW5nO1xyXG4gICAgcHJvdGVjdGVkIGhlYWRlcnM6IEh0dHBIZWFkZXJzSW50ZXJmYWNlO1xyXG4gICAgcHJvdGVjdGVkIGJvZHk6IHN0cmluZztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihtZXRob2Q6IHN0cmluZywgdXJsOiBzdHJpbmcsIGhlYWRlcnM6IEh0dHBIZWFkZXJzSW50ZXJmYWNlLCBib2R5OiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLm1ldGhvZCA9IG1ldGhvZDtcclxuICAgICAgICB0aGlzLnVybCA9IHVybDtcclxuICAgICAgICB0aGlzLmhlYWRlcnMgPSBoZWFkZXJzIHx8IHt9O1xyXG4gICAgICAgIHRoaXMuYm9keSA9IGJvZHk7XHJcbiAgICB9O1xyXG5cclxuICAgIHB1YmxpYyBnZXRNZXRob2QoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5tZXRob2Q7XHJcbiAgICB9O1xyXG5cclxuICAgIHB1YmxpYyBnZXRVcmwoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy51cmw7XHJcbiAgICB9O1xyXG5cclxuICAgIHB1YmxpYyBnZXRIZWFkZXJzKCk6IEh0dHBIZWFkZXJzSW50ZXJmYWNlIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5oZWFkZXJzO1xyXG4gICAgfTtcclxuXHJcbiAgICBwdWJsaWMgZ2V0Qm9keSgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJvZHk7XHJcbiAgICB9O1xyXG59XHJcblxyXG5pbnRlcmZhY2UgSHR0cFJlcXVlc3RJbnRlcmZhY2Uge1xyXG4gICAgZ2V0TWV0aG9kKCk6IHN0cmluZztcclxuICAgIGdldFVybCgpOiBzdHJpbmc7XHJcbiAgICBnZXRIZWFkZXJzKCk6IEh0dHBIZWFkZXJzSW50ZXJmYWNlO1xyXG4gICAgZ2V0Qm9keSgpOiBzdHJpbmcgfCBPYmplY3Q7XHJcbn1cclxuXHJcbmNsYXNzIFJlc3BvbnNlIGltcGxlbWVudHMgSHR0cFJlc3BvbnNlSW50ZXJmYWNlIHtcclxuICAgIHByb3RlY3RlZCBzdGF0dXM6IG51bWJlcjtcclxuICAgIHByb3RlY3RlZCBib2R5OiBzdHJpbmcgfCBPYmplY3Q7XHJcbiAgICBwcm90ZWN0ZWQgYm9keVJhdzogc3RyaW5nO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHN0YXR1czogbnVtYmVyLCBib2R5OiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLnN0YXR1cyA9IHN0YXR1cztcclxuICAgICAgICB0aGlzLmJvZHkgPSBib2R5O1xyXG4gICAgICAgIHRoaXMuYm9keVJhdyA9IGJvZHk7XHJcbiAgICB9O1xyXG5cclxuICAgIHB1YmxpYyBzZXRTdGF0dXMoc3RhdHVzOiBudW1iZXIpIHtcclxuICAgICAgICB0aGlzLnN0YXR1cyA9IHN0YXR1cztcclxuICAgIH07XHJcblxyXG4gICAgcHVibGljIGdldFN0YXR1cygpOiBudW1iZXIge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN0YXR1cztcclxuICAgIH07XHJcblxyXG4gICAgcHVibGljIHNldEJvZHkoYm9keTogc3RyaW5nIHwgT2JqZWN0KSB7XHJcbiAgICAgICAgdGhpcy5ib2R5ID0gYm9keTtcclxuICAgIH07XHJcblxyXG4gICAgcHVibGljIGdldEJvZHkoKTogc3RyaW5nIHwgT2JqZWN0IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5ib2R5O1xyXG4gICAgfTtcclxuXHJcbiAgICBwdWJsaWMgZ2V0Qm9keVJhdygpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJvZHlSYXc7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSHR0cFJlc3BvbnNlSW50ZXJmYWNlIHtcclxuICAgIGdldFN0YXR1cygpOiBudW1iZXI7XHJcbiAgICBzZXRTdGF0dXMoc3RhdHVzOiBudW1iZXIpOiB2b2lkO1xyXG4gICAgZ2V0Qm9keSgpOiBzdHJpbmcgfCBPYmplY3Q7XHJcbiAgICBzZXRCb2R5KGJvZHk6IHN0cmluZyB8IE9iamVjdCk6IHZvaWQ7XHJcbiAgICBnZXRCb2R5UmF3KCk6IHN0cmluZztcclxufVxyXG5cclxuaW50ZXJmYWNlIEh0dHBIZWFkZXJzSW50ZXJmYWNlIHtcclxuICAgIFtrZXk6IHN0cmluZ106IHN0cmluZztcclxufVxyXG4iLCJpbXBvcnQge1Rlc3RDYXNlLCBUZXN0Q2FzZUVudn0gZnJvbSAnLi9UZXN0Q2FzZSc7XHJcbmltcG9ydCB7QXBwfSBmcm9tICcuL0FwcCc7XHJcbmltcG9ydCB7SHR0cFJlc3BvbnNlSW50ZXJmYWNlfSBmcm9tICcuL0h0dHAnO1xyXG5pbXBvcnQge1J1bm5lciwgUnVubmVyUmVzdWx0fSBmcm9tICcuL1J1bm5lcic7XHJcbmltcG9ydCB7VG90YWxCeUJyb3dzZXIsIFRvdGFsQ2hhcnRQYW5lbH0gZnJvbSAnLi9Ub3RhbENoYXJ0UGFuZWwnO1xyXG5pbXBvcnQgUHJvbWlzZSA9IFEuUHJvbWlzZTtcclxuXHJcbmV4cG9ydCBjbGFzcyBQYWdlIHtcclxuICAgIHByb3RlY3RlZCB0ZXN0Q2FzZTogVGVzdENhc2U7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHRlc3RDYXNlOiBUZXN0Q2FzZSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdUZXN0Q2FzZSBjb25zdHJ1Y3RvciAuLi4nKTtcclxuICAgICAgICB0aGlzLnRlc3RDYXNlID0gdGVzdENhc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyByZW5kZXJFbGVtKGlkOiBzdHJpbmcsIGh0bWw6IHN0cmluZywgZGF0YTogT2JqZWN0KSB7XHJcbiAgICAgICAgdmFyICRlbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xyXG4gICAgICAgIHZhciB0ZW1wbGF0ZSA9IEhhbmRsZWJhcnMuY29tcGlsZShodG1sKTtcclxuICAgICAgICAkZWxlbS5pbm5lckhUTUwgPSB0ZW1wbGF0ZShkYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVuZGVyKCkge1xyXG4gICAgICAgIC8vIFJlbmRlciAnU2lkZWJhcicuXHJcbiAgICAgICAgQXBwLmh0dHAuZ2V0SFRNTChBcHAuY29uZmlnLmNsaWVudFVyaSArICcvdHBsL3Rlc3RjYXNlLXNpZGViYXItZm9ybS5oYnMnKVxyXG4gICAgICAgICAgICAudGhlbigocjogSHR0cFJlc3BvbnNlSW50ZXJmYWNlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBQYWdlLnJlbmRlckVsZW0oJ3Rlc3RjYXNlLXNpZGViYXItZm9ybScsIDxzdHJpbmc+ci5nZXRCb2R5KCksIHRoaXMudGVzdENhc2UpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJpbmRTYXZlQnRuKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJpbmRSdW5CdG4oKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFJlbmRlciAnTGlzdGluZ3MnLlxyXG4gICAgICAgIFEuc3ByZWFkKFtcclxuICAgICAgICAgICAgQXBwLmh0dHAuZ2V0SlNPTihBcHAuY29uZmlnLnNlcnZlclVyaSArICcvdGVzdHMuanNvbj9leGNsdWRlPXJldmlzaW9uX251bWJlcixkZXNjcmlwdGlvbixoYXJuZXNzLGVudHJpZXMsc3RhdHVzJm9yZGVyQnk9bGF0ZXN0JmxpbWl0PTI1JyksXHJcbiAgICAgICAgICAgIEFwcC5odHRwLmdldEhUTUwoQXBwLmNvbmZpZy5jbGllbnRVcmkgKyAnL3RwbC90ZXN0Y2FzZS1zaWRlYmFyLWxpc3RpbmcuaGJzJylcclxuICAgICAgICBdLCAoZGF0YVI6IEh0dHBSZXNwb25zZUludGVyZmFjZSwgdHBsUjogSHR0cFJlc3BvbnNlSW50ZXJmYWNlKSA9PiB7XHJcbiAgICAgICAgICAgIFBhZ2UucmVuZGVyRWxlbSgndGVzdGNhc2Utc2lkZWJhci1saXN0aW5nJywgPHN0cmluZz5kYXRhUi5nZXRCb2R5KCksIHRwbFIuZ2V0Qm9keSgpKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gUmVuZGVyICdNYWluIGZvcm0nLlxyXG4gICAgICAgIFEuc3ByZWFkKFtcclxuICAgICAgICAgICAgQXBwLmh0dHAuZ2V0SFRNTChBcHAuY29uZmlnLmNsaWVudFVyaSArICcvdHBsL3Rlc3RjYXNlLWVudHJ5LWZvcm0uaGJzJyksXHJcbiAgICAgICAgICAgIEFwcC5odHRwLmdldEhUTUwoQXBwLmNvbmZpZy5jbGllbnRVcmkgKyAnL3RwbC90ZXN0Y2FzZS1tYWluLWZvcm0uaGJzJylcclxuICAgICAgICBdLCAodHBsRW50cnlSOiBIdHRwUmVzcG9uc2VJbnRlcmZhY2UsIHRwbE1haW5SOiBIdHRwUmVzcG9uc2VJbnRlcmZhY2UpID0+IHtcclxuICAgICAgICAgICAgSGFuZGxlYmFycy5yZWdpc3RlclBhcnRpYWwoJ2VudHJ5JywgdHBsRW50cnlSLmdldEJvZHkoKSk7XHJcbiAgICAgICAgICAgIFBhZ2UucmVuZGVyRWxlbSgndGVzdGNhc2UtbWFpbi1mb3JtJywgPHN0cmluZz50cGxNYWluUi5nZXRCb2R5KCksIHRoaXMudGVzdENhc2UpO1xyXG4gICAgICAgIH0pLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmJpbmRBZGRUZXN0RW50cnlCdG4oKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVuZGVyQ2hhcnRQYW5lbCgpIHtcclxuICAgICAgICB2YXIgcGFuZWwgPSBuZXcgVG90YWxDaGFydFBhbmVsKHRoaXMsIHRoaXMudGVzdENhc2UpO1xyXG4gICAgICAgIHBhbmVsLmdldERhdGEoKS50aGVuKChyOiBIdHRwUmVzcG9uc2VJbnRlcmZhY2UpID0+IHtcclxuICAgICAgICAgICAgcGFuZWwucmVuZGVyKDxUb3RhbEJ5QnJvd3NlcltdPnIuZ2V0Qm9keSgpKTtcclxuICAgICAgICB9LCBmdW5jdGlvbihlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdyZW5kZXJDaGFydFBhbmVsKCk6JywgZXJyb3IpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBwcm90ZWN0ZWQgYmluZFNhdmVCdG4oKSB7XHJcbiAgICAgICAgdmFyICRzYXZlQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NhdmUtdGVzdGNhc2UtYnV0dG9uJyk7XHJcblxyXG4gICAgICAgICRzYXZlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgUGFnZS50b2dnbGVSZW5kZXJCdG4oJ3NhdmUtdGVzdGNhc2UtYnV0dG9uJywgJ2Rpc2FibGUnKTtcclxuXHJcbiAgICAgICAgICAgIHZhciB0ZXN0Q2FzZURUTyA9IFRlc3RDYXNlLmNyZWF0ZUVudGl0eUZyb21ET01FbGVtZW50KCd3cmFwcGVyJyk7XHJcbiAgICAgICAgICAgIC8vIEFwcGVuZCB0aGUgYnJvd3NlciBkYXRhLlxyXG4gICAgICAgICAgICB0ZXN0Q2FzZURUTy5lbnYgPSA8VGVzdENhc2VFbnY+e1xyXG4gICAgICAgICAgICAgICAgYnJvd3Nlck5hbWU6IHBsYXRmb3JtLm5hbWUsXHJcbiAgICAgICAgICAgICAgICBicm93c2VyVmVyc2lvbjogcGxhdGZvcm0udmVyc2lvbixcclxuICAgICAgICAgICAgICAgIG9zOiBwbGF0Zm9ybS5vc1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgQXBwLmh0dHAucG9zdEpTT04oQXBwLmNvbmZpZy5zZXJ2ZXJVcmkgKyAnL3Rlc3RzLmpzb24nLCB0ZXN0Q2FzZURUTylcclxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIFBhZ2UudG9nZ2xlUmVuZGVyQnRuKCdzYXZlLXRlc3RjYXNlLWJ1dHRvbicsICdhY3RpdmF0ZScpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGJpbmRSdW5CdG4oKSB7XHJcbiAgICAgICAgdmFyIF9wYWdlID0gdGhpcztcclxuICAgICAgICB2YXIgJHJ1bkJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdydW4tdGVzdGNhc2UtYnV0dG9uJyk7XHJcblxyXG4gICAgICAgIC8vICdSdW4gdGVzdHMnIGJ1dHRvbi5cclxuICAgICAgICAkcnVuQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgUGFnZS50b2dnbGVSZW5kZXJCdG4oJ3J1bi10ZXN0Y2FzZS1idXR0b24nLCAnZGlzYWJsZScpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHRlc3RDYXNlRFRPID0gVGVzdENhc2UuY3JlYXRlRW50aXR5RnJvbURPTUVsZW1lbnQoJ3dyYXBwZXInKTtcclxuXHJcbiAgICAgICAgICAgIC8vIEFwcGVuZCB0aGUgYnJvd3NlciBkYXRhLlxyXG4gICAgICAgICAgICB0ZXN0Q2FzZURUTy5lbnYgPSA8VGVzdENhc2VFbnY+e1xyXG4gICAgICAgICAgICAgICAgYnJvd3Nlck5hbWU6IHBsYXRmb3JtLm5hbWUsXHJcbiAgICAgICAgICAgICAgICBicm93c2VyVmVyc2lvbjogcGxhdGZvcm0udmVyc2lvbixcclxuICAgICAgICAgICAgICAgIG9zOiBwbGF0Zm9ybS5vc1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLy8gUmVuZGVyICdSZXN1bHRzJyBwYW5lbCB3aXRoIHByZWxpbWluYXJ5IGRhdGEuXHJcbiAgICAgICAgICAgIEFwcC5odHRwLmdldEhUTUwoYCR7QXBwLmNvbmZpZy5jbGllbnRVcml9L3RwbC90ZXN0Y2FzZS1yZXN1bHRzLXRhYmxlLmhic2ApXHJcbiAgICAgICAgICAgICAgICAudGhlbigocjogSHR0cFJlc3BvbnNlSW50ZXJmYWNlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgUGFnZS5yZW5kZXJFbGVtKCdyZXN1bHRzJywgPHN0cmluZz5yLmdldEJvZHkoKSwgdGVzdENhc2VEVE8pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBDcmVhdGUgdGhlIEpTIGNvZGUgYW5kIHJ1biBpdCBpbiBicm93c2VyLlxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBydW5uZXIgPSBuZXcgUnVubmVyKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgVGVzdENhc2UodGVzdENhc2VEVE8pXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICBydW5uZXIucnVuKCkudGhlbigocmVzdWx0czogUnVubmVyUmVzdWx0W10pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmUtYWN0aXZhdGUgJ1J1bicgYnRuLlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBQYWdlLnRvZ2dsZVJlbmRlckJ0bigncnVuLXRlc3RjYXNlLWJ1dHRvbicsICdhY3RpdmF0ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBTZW5kIHRoZSB0ZXN0IHJlc3VsdHMuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF9wYWdlLnNlbmRSZXN1bHRzKHJlc3VsdHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZW5kZXIgJ0NoYXJ0IFBhbmVsJy5cclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1JlbmRlcmluZyBDaGFydCBQYW5lbCAuLi4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgX3BhZ2UucmVuZGVyQ2hhcnRQYW5lbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH0sIGZhbHNlKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgYmluZEFkZFRlc3RFbnRyeUJ0bigpIHtcclxuICAgICAgICAvLyAnQWRkIG5ldyB0ZXN0JyBidXR0b24uXHJcbiAgICAgICAgdmFyICRidG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRkLXRlc3QtbGluaycpO1xyXG5cclxuICAgICAgICAkYnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOyBjb25zb2xlLmxvZygnY2xpY2s/Jyk7XHJcblxyXG4gICAgICAgICAgICBBcHAuaHR0cC5nZXRIVE1MKGAke0FwcC5jb25maWcuY2xpZW50VXJpfS90cGwvdGVzdGNhc2UtZW50cnktZm9ybS5oYnNgKS50aGVuKChyZXNwb25zZTogSHR0cFJlc3BvbnNlSW50ZXJmYWNlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBBZGQgdG8gbW9kZWwuXHJcbiAgICAgICAgICAgICAgICAvLyBAdG9kbyBUaGlzIHNob3VsZCBiZSB0aGUgTVZDcyBqb2IuXHJcbiAgICAgICAgICAgICAgICB2YXIgZW50cnlJZCA9IFBhZ2UuZ2V0TmV4dFRlc3RDYXNlRW50cnlJZCgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIG5ld1Rlc3RFbnRyeSA9IFRlc3RDYXNlLmNyZWF0ZUVtcHR5VGVzdENhc2VFbnRyeShlbnRyeUlkKTtcclxuICAgICAgICAgICAgICAgIHRoaXMudGVzdENhc2UuYWRkRW50cnkobmV3VGVzdEVudHJ5KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBSZW5kZXIgbmV3IHRlc3QgZW50cnkuXHJcbiAgICAgICAgICAgICAgICB2YXIgdGVtcGxhdGUgPSBIYW5kbGViYXJzLmNvbXBpbGUocmVzcG9uc2UuZ2V0Qm9keSgpKTtcclxuICAgICAgICAgICAgICAgIHZhciBodG1sID0gdGVtcGxhdGUobmV3VGVzdEVudHJ5KTtcclxuICAgICAgICAgICAgICAgIHZhciAkbmV3RW50cnkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICAgICAgICAgICRuZXdFbnRyeS5pbm5lckhUTUwgPSBodG1sO1xyXG4gICAgICAgICAgICAgICAgdmFyICRlbnRyaWVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VudHJpZXMnKTtcclxuICAgICAgICAgICAgICAgICRlbnRyaWVzLmFwcGVuZENoaWxkKCRuZXdFbnRyeS5maXJzdENoaWxkKTtcclxuICAgICAgICAgICAgICAgIC8vIEJpbmQgZXZlbnRzIHRvIGl0LlxyXG4gICAgICAgICAgICAgICAgdGhpcy5iaW5kUmVtb3ZlVGVzdEVudHJ5QnRuKGVudHJ5SWQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgcHJvdGVjdGVkIGJpbmRSZW1vdmVUZXN0RW50cnlCdG4oZW50cnlJZDogbnVtYmVyKSB7XHJcbiAgICAgICAgdmFyICRlbnRyaWVzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VudHJpZXMnKTtcclxuICAgICAgICB2YXIgJGVudHJ5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Rlc3RjYXNlLXRlc3QtJyArIGVudHJ5SWQpO1xyXG4gICAgICAgIHZhciAkYnV0dG9uID0gJGVudHJ5LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3Rlc3RjYXNlLXRlc3QtcmVtb3ZlJyk7XHJcblxyXG4gICAgICAgICRidXR0b25bMF0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnY2xpY2s/Jyk7XHJcblxyXG4gICAgICAgICAgICAvLyBSZW1vdmUgZnJvbSBtb2RlbC5cclxuICAgICAgICAgICAgLy8gQHRvZG8gVGhpcyBzaG91bGQgYmUgdGhlIE1WQ3Mgam9iLlxyXG4gICAgICAgICAgICB0aGlzLnRlc3RDYXNlLnJlbW92ZUVudHJ5KGVudHJ5SWQpO1xyXG5cclxuICAgICAgICAgICAgLy8gUmVtb3ZlIGZyb20gRE9NLlxyXG4gICAgICAgICAgICAkZW50cmllcy5yZW1vdmVDaGlsZCgkZW50cnkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICBwcm90ZWN0ZWQgc3RhdGljIGdldE5leHRUZXN0Q2FzZUVudHJ5SWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3Rlc3RjYXNlLXRlc3QnKS5sZW5ndGggKyAxO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgdG9nZ2xlUmVuZGVyQnRuKGlkOiBzdHJpbmcsIHN0YXR1czogc3RyaW5nKSB7XHJcbiAgICAgICAgdmFyICRidG4gPSA8SFRNTEJ1dHRvbkVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpO1xyXG5cclxuICAgICAgICBpZiAoc3RhdHVzID09PSAnYWN0aXZhdGUnKSB7XHJcbiAgICAgICAgICAgICRidG4uY2xhc3NMaXN0LnJlbW92ZSgnYnRuLWxvYWRpbmcnKTtcclxuICAgICAgICAgICAgJGJ0bi5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICRidG4uY2xhc3NOYW1lICs9ICcgYnRuLWxvYWRpbmcnO1xyXG4gICAgICAgICAgICAkYnRuLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNlbmRSZXN1bHRzKHJlc3VsdHM6IFJ1bm5lclJlc3VsdFtdKTogUHJvbWlzZTxIdHRwUmVzcG9uc2VJbnRlcmZhY2U+IHtcclxuXHJcbiAgICAgICAgLy8gUmVmcmVzaCB0aGUgdGVzdENhc2Ugb2JqZWN0LlxyXG4gICAgICAgIC8vIEB0b2RvIE1vZGVsIGlzIG5vdCBrZWVwaW5nIHVwIHdpdGggRE9NIGNoYW5nZXMuIFJlZmFjdG9yLlxyXG4gICAgICAgIHZhciB0ZXN0Q2FzZURUTyA9IFRlc3RDYXNlLmNyZWF0ZUVudGl0eUZyb21ET01FbGVtZW50KCd3cmFwcGVyJyk7XHJcblxyXG4gICAgICAgIC8vIEFwcGVuZCB0aGUgcmVzdWx0cy5cclxuICAgICAgICAvLyBLZWVwIHRoZSBvcmlnaW5hbCBmb3JtIG9yZGVyLlxyXG4gICAgICAgIC8vIFRoYXQncyB3aHkgcmVzdWx0cyBpcyBhbiBvYmplY3Qgc3RhcnRpbmcgZnJvbSBrZXkgMS5cclxuICAgICAgICBmb3IgKHZhciBpIGluIHJlc3VsdHMpIHtcclxuICAgICAgICAgICAgaWYgKCFyZXN1bHRzLmhhc093blByb3BlcnR5KGkpKSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0ZXN0Q2FzZURUTy5lbnRyaWVzW2ldLnJlc3VsdHMgPSByZXN1bHRzW2ldO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQXBwZW5kIHRoZSBicm93c2VyIGRhdGEuXHJcbiAgICAgICAgdGVzdENhc2VEVE8uZW52ID0gPFRlc3RDYXNlRW52PntcclxuICAgICAgICAgICAgYnJvd3Nlck5hbWU6IHBsYXRmb3JtLm5hbWUsXHJcbiAgICAgICAgICAgIGJyb3dzZXJWZXJzaW9uOiBwbGF0Zm9ybS52ZXJzaW9uLFxyXG4gICAgICAgICAgICBvczogcGxhdGZvcm0ub3NcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjb25zb2xlLmxvZyh0ZXN0Q2FzZURUTywgSlNPTi5zdHJpbmdpZnkodGVzdENhc2VEVE8pKTtcclxuXHJcbiAgICAgICAgLy8gVXBkYXRlIHRoZSBtb2RlbC5cclxuICAgICAgICB0aGlzLnRlc3RDYXNlID0gVGVzdENhc2UuY3JlYXRlKHRlc3RDYXNlRFRPKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIEFwcC5odHRwLnBvc3RKU09OKGAke0FwcC5jb25maWcuc2VydmVyVXJpfS90ZXN0cy5qc29uYCwgdGVzdENhc2VEVE8pO1xyXG4gICAgfTtcclxuXHJcbn1cclxuXHJcbmludGVyZmFjZSBCdXR0b25FdmVudFRhcmdldCBleHRlbmRzIEV2ZW50VGFyZ2V0IHtcclxuICAgIGRhdGFzZXQ6IHtcclxuICAgICAgICBlbnRyeUlkOiBudW1iZXI7XHJcbiAgICB9O1xyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBSb3V0ZXIge1xyXG4gICAgcHJvdGVjdGVkIHJvdXRlczogUm91dGVbXSA9IFtdO1xyXG5cclxuICAgIHB1YmxpYyBydW4oY3VzdG9tUGF0aD86IHN0cmluZykge1xyXG4gICAgICAgIHZhciBwYXRoOiBzdHJpbmcgPSBjdXN0b21QYXRoID8gY3VzdG9tUGF0aCA6IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZTtcclxuICAgICAgICB2YXIgcm91dGUgPSB0aGlzLm1hdGNoUm91dGUocGF0aCk7XHJcbiAgICAgICAgaWYgKHJvdXRlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByb3V0ZS5hY3Rpb24uYXBwbHkobnVsbCwgcm91dGUuYXJncyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBFcnJvcignTm8gdmFsaWQgcm91dGUgZm91bmQuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhZGRSb3V0ZShwYXRoOiBzdHJpbmcsIGFjdGlvbjogRnVuY3Rpb24pIHtcclxuICAgICAgICBpZiAoIXBhdGggfHwgIWFjdGlvbikge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnJvdXRlcy5wdXNoKHtcclxuICAgICAgICAgICAgcGF0aDogcGF0aCxcclxuICAgICAgICAgICAgYWN0aW9uOiBhY3Rpb25cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIDEuIEdFVCAvdGVzdC9zZGFkYWFkMTIvdG90YWxzL2J5U3R1ZmYuanNvblxyXG4gICAgICogMi4gVHJ5IG1hdGNoIHdpdGggL3Rlc3Qve3Rlc3R9L3RvdGFscy97ZmlsdGVyfS5qc29uXHJcbiAgICAgKiAzLlxyXG4gICAgICogdmFyIGFhID0gXCIvdGVzdC9zZGFkYWFkMTIvdG90YWxzL2J5U3R1ZmYuanNvblwiLm1hdGNoKG5ldyBSZWdFeHAoXCJcXC90ZXN0XFwvKFthLXowLTldKylcXC90b3RhbHNcXC8oW2EtejAtOV0rKVxcLmpzb25cIiwgJ2knKSk7IGFhID0gYWEuc2xpY2UoMSwgYWEubGVuZ3RoKTtcclxuICAgICovXHJcbiAgICBwcm90ZWN0ZWQgbWF0Y2hSb3V0ZShwYXRoOiBzdHJpbmcpOiBSZXF1ZXN0ZWRSb3V0ZSB7XHJcbiAgICAgICAgdmFyIG1hdGNoRm91bmQ6IEFycmF5PHN0cmluZz47XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLnJvdXRlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBtYXRjaEZvdW5kID0gcGF0aC5tYXRjaChuZXcgUmVnRXhwKFJvdXRlci5wcmVwYXJlUGF0aCh0aGlzLnJvdXRlc1tpXS5wYXRoKSwgJ2knKSk7XHJcbiAgICAgICAgICAgIGlmIChtYXRjaEZvdW5kKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IG1hdGNoRm91bmQuc2xpY2UoMSwgbWF0Y2hGb3VuZC5sZW5ndGgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDxSZXF1ZXN0ZWRSb3V0ZT57XHJcbiAgICAgICAgICAgICAgICAgICAgcGF0aDogdGhpcy5yb3V0ZXNbaV0ucGF0aCxcclxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IHRoaXMucm91dGVzW2ldLmFjdGlvbixcclxuICAgICAgICAgICAgICAgICAgICBhcmdzOiBhcmdzLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3RlZFBhdGg6IHBhdGhcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHN0YXRpYyBwcmVwYXJlUGF0aChwYXRoOiBzdHJpbmcpIHtcclxuICAgICAgICByZXR1cm4gcGF0aC5yZXBsYWNlKC97W2Etel0rfS9nLCAnKFthLXowLTldKyknKTtcclxuICAgIH1cclxufVxyXG5cclxuaW50ZXJmYWNlIFJvdXRlIHtcclxuICAgIHBhdGg6IHN0cmluZztcclxuICAgIGFjdGlvbjogRnVuY3Rpb247XHJcbn1cclxuXHJcbmludGVyZmFjZSBSZXF1ZXN0ZWRSb3V0ZSBleHRlbmRzIFJvdXRlIHtcclxuICAgIHJlcXVlc3RlZFBhdGg6IHN0cmluZztcclxuICAgIGFyZ3M6IEFycmF5PHN0cmluZz47XHJcbn1cclxuIiwiaW1wb3J0IHtUZXN0Q2FzZX0gZnJvbSAnLi9UZXN0Q2FzZSc7XHJcbmltcG9ydCBQcm9taXNlID0gUS5Qcm9taXNlO1xyXG5cclxuZXhwb3J0IGNsYXNzIFJ1bm5lciB7XHJcbiAgICBwcm90ZWN0ZWQgdGVzdENhc2U6IFRlc3RDYXNlO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcih0ZXN0Q2FzZTogVGVzdENhc2UpIHtcclxuICAgICAgICB0aGlzLnRlc3RDYXNlID0gdGVzdENhc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJ1bigpOiBQcm9taXNlPHtba2V5OiBudW1iZXJdOiBSdW5uZXJSZXN1bHR9PiB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnRlc3RDYXNlLmlzUmVhZHlUb1J1bigpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignWW91IG5lZWQgdG8gaGF2ZSBhdCBsZWFzdCB0d28gY29kZSBlbnRyaWVzIGluIG9yZGVyIHRvIHJ1biB0aGUgdGVzdCBjYXNlLicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc29sZS5sb2coJ1N0YXJ0aW5nIHJ1bm5lciAuLi4nKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5zdGFydEJlbmNoKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHN0YXJ0QmVuY2goKTogUHJvbWlzZTx7W2tleTogbnVtYmVyXTogUnVubmVyUmVzdWx0fT4ge1xyXG4gICAgICAgIHZhciBkZWZlcnJlZFEgPSBRLmRlZmVyPHtba2V5OiBudW1iZXJdOiBSdW5uZXJSZXN1bHR9PigpO1xyXG5cclxuICAgICAgICB2YXIgdGVzdENhc2UgPSB0aGlzLnRlc3RDYXNlO1xyXG4gICAgICAgIHZhciBiZW5jaGVzOiBCZW5jaG1hcmtbXSA9IFtdO1xyXG4gICAgICAgIHZhciBiZW5jaDogQmVuY2htYXJrO1xyXG4gICAgICAgIHZhciByZXN1bHRzOiB7W2tleTogbnVtYmVyXTogUnVubmVyUmVzdWx0fSA9IHt9O1xyXG5cclxuICAgICAgICBmb3IgKHZhciBqIGluIHRlc3RDYXNlLmVudHJpZXMpIHtcclxuICAgICAgICAgICAgaWYgKCF0ZXN0Q2FzZS5lbnRyaWVzLmhhc093blByb3BlcnR5KGopKSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgYmVuY2ggPSBuZXcgQmVuY2htYXJrKHRlc3RDYXNlLmVudHJpZXNbal0udGl0bGUsIHtcclxuICAgICAgICAgICAgICAgIGlkOiBqLFxyXG4gICAgICAgICAgICAgICAgYXN5bmM6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBzZXR1cDogdGVzdENhc2UuaGFybmVzcy5zZXRVcCxcclxuICAgICAgICAgICAgICAgIHRlYXJkb3duOiB0ZXN0Q2FzZS5oYXJuZXNzLnRlYXJEb3duLFxyXG4gICAgICAgICAgICAgICAgZm46IHRlc3RDYXNlLmVudHJpZXNbal0uY29kZSxcclxuICAgICAgICAgICAgICAgIG9uU3RhcnQ6IGZ1bmN0aW9uKGU6IEJlbmNobWFyay5FdmVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBiZW5jaFJlc3VsdDogQmVuY2htYXJrID0gPEJlbmNobWFyaz5lLnRhcmdldDtcclxuICAgICAgICAgICAgICAgICAgICBSdW5uZXIucmVuZGVyUmVzdWx0KGJlbmNoUmVzdWx0LmlkLCAnU3RhcnRpbmcgLi4uJyk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgb25Db21wbGV0ZTogZnVuY3Rpb24oZTogQmVuY2htYXJrLkV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGJlbmNoUmVzdWx0OiBCZW5jaG1hcmsgPSA8QmVuY2htYXJrPmUudGFyZ2V0O1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHNbYmVuY2hSZXN1bHQuaWRdID0gPFJ1bm5lclJlc3VsdD57XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBiZW5jaFJlc3VsdC5pZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGJlbmNoUmVzdWx0LmVycm9yID8gQmVuY2htYXJrLmpvaW4oYmVuY2hSZXN1bHQuZXJyb3IpIDogbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3BzUGVyU2VjOiBiZW5jaFJlc3VsdC5oei50b0ZpeGVkKGJlbmNoUmVzdWx0Lmh6IDwgMTAwID8gMiA6IDApLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHNQZXJTZWNGb3JtYXR0ZWQ6IEJlbmNobWFyay5mb3JtYXROdW1iZXIoYmVuY2hSZXN1bHQuaHoudG9GaXhlZChiZW5jaFJlc3VsdC5oeiA8IDEwMCA/IDIgOiAwKSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBtOiBiZW5jaFJlc3VsdC5zdGF0cy5ybWUudG9GaXhlZCgyKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcnVuU2FtcGxlczogYmVuY2hSZXN1bHQuc3RhdHMuc2FtcGxlLmxlbmd0aFxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgUnVubmVyLnJlbmRlclJlc3VsdChiZW5jaFJlc3VsdC5pZCwgcmVzdWx0c1tiZW5jaFJlc3VsdC5pZF0ub3BzUGVyU2VjRm9ybWF0dGVkICsgJyAoJnBsdXNtbjsnICsgcmVzdWx0c1tiZW5jaFJlc3VsdC5pZF0ucG0gKyAnKScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gS2VlcCB0aGUgb3JpZ2luYWwgb3JkZXIsIGV2ZW4gaWYgdGhlIGNvZGUgY29udGVudCBvciB0aXRsZSBjaGFuZ2VzLlxyXG4gICAgICAgICAgICBiZW5jaGVzLnB1c2goYmVuY2gpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIEJlbmNobWFyay5pbnZva2UoYmVuY2hlcywge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogJ3J1bicsXHJcbiAgICAgICAgICAgICAgICBhcmdzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgLy8gJ3F1ZXVlZCc6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBvblN0YXJ0OiAoZTogQmVuY2htYXJrLkV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1N0YXJ0aW5nIGJlbmNobWFya3MgLi4uJywgZSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgb25DeWNsZTogKGU6IEJlbmNobWFyay5FdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdvbkN5Y2xlIGhlcmUuJywgZSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgb25FcnJvcjogKGU6IEJlbmNobWFyay5FdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdvbkVycm9yIGhlcmUuJywgZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWRRLnJlamVjdChuZXcgRXJyb3IoJ1J1bm5pbmcgc3VpdGUgcmV0dXJuZWQgYW4gZXJyb3IuJykpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG9uQ29tcGxldGU6IChlOiBCZW5jaG1hcmsuRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnb25Db21wbGV0ZSBoZXJlLicsIGUsIHJlc3VsdHMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBSdW5uZXIucmVuZGVyV2lubmVyUmVzdWx0KEJlbmNobWFyay5maWx0ZXIoYmVuY2hlcywgJ2Zhc3Rlc3QnKVswXS5pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgUnVubmVyLnJlbmRlckxvc2VyUmVzdWx0KEJlbmNobWFyay5maWx0ZXIoYmVuY2hlcywgJ3Nsb3dlc3QnKVswXS5pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWRRLnJlc29sdmUocmVzdWx0cyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sIDIwMDApO1xyXG5cclxuICAgICAgICBjb25zb2xlLmxvZygnYWljaScpO1xyXG5cclxuICAgICAgICByZXR1cm4gZGVmZXJyZWRRLnByb21pc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHN0YXRpYyByZW5kZXJSZXN1bHQoaWQ6IHN0cmluZyB8IG51bWJlciwgdGV4dDogc3RyaW5nKSB7XHJcbiAgICAgICAgdmFyICRlbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Rlc3RjYXNlLXRlc3QtcmVzdWx0LXRleHQtJyArIGlkKTtcclxuICAgICAgICAkZWxlbS5pbm5lckhUTUwgPSB0ZXh0O1xyXG4gICAgfTtcclxuXHJcbiAgICBwcm90ZWN0ZWQgc3RhdGljIHJlbmRlcldpbm5lclJlc3VsdChpZDogc3RyaW5nIHwgbnVtYmVyKSB7XHJcbiAgICAgICAgdmFyICRlbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Rlc3RjYXNlLXRlc3QtcmVzdWx0LXRleHQtJyArIGlkKTtcclxuICAgICAgICAkZWxlbS5jbGFzc05hbWUgKz0gJyBzdWNjZXNzJztcclxuICAgIH07XHJcblxyXG4gICAgcHJvdGVjdGVkIHN0YXRpYyByZW5kZXJMb3NlclJlc3VsdChpZDogc3RyaW5nIHwgbnVtYmVyKSB7XHJcbiAgICAgICAgdmFyICRlbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Rlc3RjYXNlLXRlc3QtcmVzdWx0LXRleHQtJyArIGlkKTtcclxuICAgICAgICAkZWxlbS5jbGFzc05hbWUgKz0gJyBkYW5nZXInO1xyXG4gICAgfTtcclxuXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgUnVubmVyUmVzdWx0IHtcclxuICAgIGlkOiBudW1iZXI7XHJcbiAgICBlcnJvcjogc3RyaW5nO1xyXG4gICAgb3BzUGVyU2VjOiBzdHJpbmc7XHJcbiAgICBvcHNQZXJTZWNGb3JtYXR0ZWQ6IHN0cmluZztcclxuICAgIHBtOiBzdHJpbmc7XHJcbiAgICBydW5TYW1wbGVzOiBudW1iZXI7XHJcbn1cclxuIiwiaW1wb3J0IHtVdGlsfSBmcm9tICcuL1V0aWxzJztcclxuaW1wb3J0IHtSdW5uZXJSZXN1bHR9IGZyb20gJy4vUnVubmVyJztcclxuXHJcbmV4cG9ydCBjbGFzcyBUZXN0Q2FzZSB7XHJcbiAgICBwcm90ZWN0ZWQgX3RpdGxlOiBzdHJpbmc7XHJcbiAgICBwcm90ZWN0ZWQgX3NsdWc6IHN0cmluZztcclxuICAgIHByb3RlY3RlZCBfZGVzY3JpcHRpb246IHN0cmluZztcclxuICAgIHByb3RlY3RlZCBfc3RhdHVzOiBzdHJpbmc7XHJcbiAgICBwcm90ZWN0ZWQgX2hhcm5lc3M6IFRlc3RDYXNlSGFybmVzcztcclxuICAgIHByb3RlY3RlZCBfZW50cmllczogVGVzdENhc2VFbnRyeVtdO1xyXG4gICAgcHJvdGVjdGVkIF9lbnY6IFRlc3RDYXNlRW52O1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcih0ZXN0Q2FzZTogVGVzdENhc2VFbnRpdHkpIHtcclxuICAgICAgICB0aGlzLnRpdGxlID0gdGVzdENhc2UudGl0bGU7XHJcbiAgICAgICAgdGhpcy5zbHVnID0gdGVzdENhc2Uuc2x1ZztcclxuICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gdGVzdENhc2UuZGVzY3JpcHRpb247XHJcbiAgICAgICAgdGhpcy5zdGF0dXMgPSB0ZXN0Q2FzZS5zdGF0dXM7XHJcbiAgICAgICAgdGhpcy5oYXJuZXNzID0gdGVzdENhc2UuaGFybmVzcztcclxuICAgICAgICB0aGlzLmVudHJpZXMgPSB0ZXN0Q2FzZS5lbnRyaWVzO1xyXG4gICAgICAgIHRoaXMuZW52ID0gdGVzdENhc2UuZW52O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXQgdGl0bGUodGl0bGU6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMuX3RpdGxlID0gdGl0bGU7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCB0aXRsZSgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl90aXRsZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0IHNsdWcoc2x1Zzogc3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy5fc2x1ZyA9IHNsdWc7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBzbHVnKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NsdWc7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldCBkZXNjcmlwdGlvbihkZXNjcmlwdGlvbjogc3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy5fZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IGRlc2NyaXB0aW9uKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Rlc2NyaXB0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXQgc3RhdHVzKHN0YXR1czogc3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy5fc3RhdHVzID0gc3RhdHVzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgc3RhdHVzKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXR1cztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0IGhhcm5lc3MoaGFybmVzczogVGVzdENhc2VIYXJuZXNzKSB7XHJcbiAgICAgICAgdGhpcy5faGFybmVzcyA9IGhhcm5lc3M7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBoYXJuZXNzKCk6IFRlc3RDYXNlSGFybmVzcyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2hhcm5lc3M7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldCBlbnRyaWVzKGVudHJpZXM6IFRlc3RDYXNlRW50cnlbXSkge1xyXG4gICAgICAgIHRoaXMuX2VudHJpZXMgPSBlbnRyaWVzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgZW50cmllcygpOiBUZXN0Q2FzZUVudHJ5W10ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9lbnRyaWVzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhZGRFbnRyeShlbnRyeTogVGVzdENhc2VFbnRyeSk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuX2VudHJpZXNbZW50cnkuaWRdID0gZW50cnk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlbW92ZUVudHJ5KGlkOiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICBkZWxldGUgdGhpcy5fZW50cmllc1tpZF07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldCBlbnYoZW52OiBUZXN0Q2FzZUVudikge1xyXG4gICAgICAgIHRoaXMuX2VudiA9IGVudjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IGVudigpOiBUZXN0Q2FzZUVudiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VudjtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgaXNSZWFkeVRvUnVuKCk6IGJvb2xlYW4ge1xyXG4gICAgICAgIHJldHVybiAoVXRpbC5nZXRPYmpMZW5ndGgodGhpcy5lbnRyaWVzKSA+IDIpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgY3JlYXRlKHRlc3RDYXNlRW50aXR5OiBUZXN0Q2FzZUVudGl0eSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgVGVzdENhc2UodGVzdENhc2VFbnRpdHkpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgY3JlYXRlRW1wdHlFbnRpdHkoKTogVGVzdENhc2VFbnRpdHkge1xyXG4gICAgICAgIHJldHVybiA8VGVzdENhc2VFbnRpdHk+e1xyXG4gICAgICAgICAgICB0aXRsZTogJycsXHJcbiAgICAgICAgICAgIHNsdWc6IFV0aWwucmFuZG9tU3RyaW5nKDEwKSxcclxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICcnLFxyXG4gICAgICAgICAgICBzdGF0dXM6ICdwdWJsaWMnLFxyXG4gICAgICAgICAgICBoYXJuZXNzOiA8VGVzdENhc2VIYXJuZXNzPntcclxuICAgICAgICAgICAgICAgIGh0bWw6ICcnLFxyXG4gICAgICAgICAgICAgICAgc2V0VXA6ICcnLFxyXG4gICAgICAgICAgICAgICAgdGVhckRvd246ICcnXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVudHJpZXM6IFtcclxuICAgICAgICAgICAgICAgIDxUZXN0Q2FzZUVudHJ5PntpZDogMSwgdGl0bGU6ICcnLCBjb2RlOiAnJ30sXHJcbiAgICAgICAgICAgICAgICA8VGVzdENhc2VFbnRyeT57aWQ6IDIsIHRpdGxlOiAnJywgY29kZTogJyd9XHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgY3JlYXRlRW50aXR5RnJvbURPTUVsZW1lbnQoaWQ6IHN0cmluZyk6IFRlc3RDYXNlRW50aXR5IHtcclxuICAgICAgICB2YXIgJGVsZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9ICA8e3Rlc3RDYXNlOiBUZXN0Q2FzZUVudGl0eX0+Zm9ybVRvT2JqZWN0KCRlbGVtKTtcclxuICAgICAgICByZXR1cm4gcmVzdWx0LnRlc3RDYXNlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgY3JlYXRlRW1wdHlUZXN0Q2FzZUVudHJ5KGlkOiBudW1iZXIpIHtcclxuICAgICAgICByZXR1cm4gPFRlc3RDYXNlRW50cnk+e1xyXG4gICAgICAgICAgICBpZDogaWQsXHJcbiAgICAgICAgICAgIHRpdGxlOiAnJyxcclxuICAgICAgICAgICAgY29kZTogJydcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFRlc3RDYXNlRW50aXR5IHtcclxuICAgIHRpdGxlOiBzdHJpbmc7XHJcbiAgICBzbHVnOiBzdHJpbmc7XHJcbiAgICBkZXNjcmlwdGlvbjogc3RyaW5nO1xyXG4gICAgc3RhdHVzOiBzdHJpbmc7XHJcbiAgICBoYXJuZXNzOiBUZXN0Q2FzZUhhcm5lc3M7XHJcbiAgICBlbnRyaWVzOiBUZXN0Q2FzZUVudHJ5W107XHJcbiAgICBlbnY6IFRlc3RDYXNlRW52O1xyXG59XHJcblxyXG5pbnRlcmZhY2UgVGVzdENhc2VIYXJuZXNzIHtcclxuICAgIGh0bWw6IHN0cmluZztcclxuICAgIHNldFVwOiBzdHJpbmc7XHJcbiAgICB0ZWFyRG93bjogc3RyaW5nO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgVGVzdENhc2VFbnRyeSB7XHJcbiAgICBpZDogbnVtYmVyO1xyXG4gICAgdGl0bGU6IHN0cmluZztcclxuICAgIGNvZGU6IHN0cmluZztcclxuICAgIHJlc3VsdHM/OiBSdW5uZXJSZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgVGVzdENhc2VFbnYge1xyXG4gICAgYnJvd3Nlck5hbWU6IHN0cmluZztcclxuICAgIGJyb3dzZXJWZXJzaW9uOiBzdHJpbmc7XHJcbiAgICBvczogc3RyaW5nO1xyXG59XHJcbiIsImltcG9ydCB7VGVzdENhc2V9IGZyb20gJy4vVGVzdENhc2UnO1xyXG5pbXBvcnQge1BhZ2V9IGZyb20gJy4vUGFnZSc7XHJcbmltcG9ydCB7UGFuZWx9IGZyb20gJy4vUGFuZWwnO1xyXG5pbXBvcnQge0h0dHBSZXNwb25zZUludGVyZmFjZX0gZnJvbSAnLi9IdHRwJztcclxuaW1wb3J0IHtBcHB9IGZyb20gJy4vQXBwJztcclxuaW1wb3J0IFByb21pc2UgPSBRLlByb21pc2U7XHJcblxyXG5leHBvcnQgY2xhc3MgVG90YWxDaGFydFBhbmVsIGltcGxlbWVudHMgUGFuZWwge1xyXG4gICAgcHJvdGVjdGVkIHBhZ2U6IFBhZ2U7XHJcbiAgICBwcm90ZWN0ZWQgdGVzdENhc2U6IFRlc3RDYXNlO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHBhZ2U6IFBhZ2UsIHRlc3RDYXNlOiBUZXN0Q2FzZSkge1xyXG4gICAgICAgIHRoaXMucGFnZSA9IHBhZ2U7XHJcbiAgICAgICAgdGhpcy50ZXN0Q2FzZSA9IHRlc3RDYXNlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXREYXRhKCk6IFByb21pc2U8SHR0cFJlc3BvbnNlSW50ZXJmYWNlPiB7XHJcbiAgICAgICAgcmV0dXJuIEFwcC5odHRwLmdldEpTT04oYCR7QXBwLmNvbmZpZy5zZXJ2ZXJVcml9L3Rlc3QvJHt0aGlzLnRlc3RDYXNlLnNsdWd9L3RvdGFscy9ieS1icm93c2VyLmpzb25gKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBAdG9kbyBTaW1wbGlmeSB0aGlzIGJ5IGFkZGluZyBhIDNyZHBhcnR5IGNoYXJ0IGxpYnJhcnkuXHJcbiAgICBwdWJsaWMgcmVuZGVyKGRhdGE6IFRvdGFsQnlCcm93c2VyW10pIHtcclxuICAgICAgICB2YXIgJGNoYXJ0RGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NoYXJ0LWRpdicpO1xyXG4gICAgICAgIGlmICgkY2hhcnREaXYuY2xhc3NOYW1lID09PSAncmVuZGVyZWQnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3JlbmRlcihkYXRhKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBnb29nbGUuY2hhcnRzLmxvYWQoJ2N1cnJlbnQnLCB7cGFja2FnZXM6IFsnY29yZWNoYXJ0JywgJ2JhciddfSk7XHJcbiAgICAgICAgICAgIGdvb2dsZS5jaGFydHMuc2V0T25Mb2FkQ2FsbGJhY2soKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcmVuZGVyKGRhdGEpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIF9yZW5kZXIoZGF0YTogVG90YWxCeUJyb3dzZXJbXSkge1xyXG4gICAgICAgIHZhciAkY2hhcnREaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2hhcnQtZGl2Jyk7XHJcbiAgICAgICAgdmFyIGNoYXJ0ID0gbmV3IGdvb2dsZS52aXN1YWxpemF0aW9uLkJhckNoYXJ0KCRjaGFydERpdik7XHJcblxyXG4gICAgICAgIHZhciBicm93c2VyczogYW55W10gPSBbXTtcclxuICAgICAgICB2YXIgcmVzdWx0c1NldDogYW55W10gPSBbXTtcclxuXHJcbiAgICAgICAgZGF0YS5tYXAoZnVuY3Rpb24gKGVudHJ5KSB7XHJcbiAgICAgICAgICAgIHZhciBlbnRyeVJlc3VsdHM6IGFueSA9IHtcclxuICAgICAgICAgICAgICAgIHRpdGxlOiBlbnRyeS50aXRsZVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBlbnRyeS50b3RhbHMuZm9yRWFjaChmdW5jdGlvbih0b3RhbCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGJyb3dzZXJJZGVudGlmaWVyID0gdG90YWwuYnJvd3Nlck5hbWU7XHJcbiAgICAgICAgICAgICAgICBpZiAoYnJvd3NlcnMuaW5kZXhPZihicm93c2VySWRlbnRpZmllcikgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJvd3NlcnMucHVzaChicm93c2VySWRlbnRpZmllcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbnRyeVJlc3VsdHNbYnJvd3NlcklkZW50aWZpZXJdID0gcGFyc2VJbnQodG90YWwubWV0cmljVmFsdWUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmVzdWx0c1NldC5wdXNoKF8ubWFwKGVudHJ5UmVzdWx0cykpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBicm93c2Vycy51bnNoaWZ0KCdUb3RhbCcpO1xyXG4gICAgICAgIHJlc3VsdHNTZXQudW5zaGlmdChicm93c2Vycyk7XHJcblxyXG4gICAgICAgIHZhciBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICBsZWdlbmQ6IHtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAnYm90dG9tJ1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBiYXJzOiAnaG9yaXpvbnRhbCcsXHJcbiAgICAgICAgICAgIGNoYXJ0QXJlYToge1xyXG4gICAgICAgICAgICAgICAgd2lkdGg6ICc4MCUnLFxyXG4gICAgICAgICAgICAgICAgJ2hlaWdodCc6ICc4MCUnXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBjaGFydC5kcmF3KFxyXG4gICAgICAgICAgICBnb29nbGUudmlzdWFsaXphdGlvbi5hcnJheVRvRGF0YVRhYmxlKHJlc3VsdHNTZXQpLFxyXG4gICAgICAgICAgICBvcHRpb25zXHJcbiAgICAgICAgKTtcclxuICAgICAgICAkY2hhcnREaXYuY2xhc3NOYW1lID0gJ3JlbmRlcmVkJztcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBUb3RhbEJ5QnJvd3NlciB7XHJcbiAgICB0aXRsZTogc3RyaW5nO1xyXG4gICAgdG90YWxzOiBUb3RhbEJ5QnJvd3Nlck1ldHJpY1tdO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFRvdGFsQnlCcm93c2VyTWV0cmljIHtcclxuICAgIGJyb3dzZXJOYW1lOiBzdHJpbmc7XHJcbiAgICBtZXRyaWNUeXBlOiBzdHJpbmc7XHJcbiAgICBtZXRyaWNWYWx1ZTogc3RyaW5nO1xyXG4gICAgcnVuQ291bnQ6IHN0cmluZztcclxufVxyXG4iLCJleHBvcnQgY2xhc3MgVXRpbCB7XHJcbiAgICBwdWJsaWMgc3RhdGljIHJhbmRvbVN0cmluZyhsZW46IG51bWJlciwgY2hhclNldD86IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAgICAgY2hhclNldCA9IGNoYXJTZXQgfHwgJ0FCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5JztcclxuICAgICAgICB2YXIgcmFuZG9tU3RyaW5nID0gJyc7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICAgICAgICB2YXIgcmFuZG9tUG96ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY2hhclNldC5sZW5ndGgpO1xyXG4gICAgICAgICAgICByYW5kb21TdHJpbmcgKz0gY2hhclNldC5zdWJzdHJpbmcocmFuZG9tUG96LCByYW5kb21Qb3ogKyAxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJhbmRvbVN0cmluZztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgcmVhbCBudW1iZXIgb2YgcHJvcGVydGllcyBmcm9tIGFuIG9iamVjdC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge29iamVjdH0gb1xyXG4gICAgICogQHJldHVybnMge251bWJlcn1cclxuICAgICAqL1xyXG4gICAgcHVibGljIHN0YXRpYyBnZXRPYmpMZW5ndGgobzogT2JqZWN0KTogbnVtYmVyIHtcclxuICAgICAgICBpZiAodHlwZW9mIG8gIT09ICdvYmplY3QnIHx8IG8gPT09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgbDogbnVtYmVyID0gMDtcclxuICAgICAgICB2YXIgazogYW55O1xyXG5cclxuICAgICAgICBpZiAodHlwZW9mIE9iamVjdC5rZXlzID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIGwgPSBPYmplY3Qua2V5cyhvKS5sZW5ndGg7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZm9yIChrIGluIG8pIHtcclxuICAgICAgICAgICAgICAgIGlmIChvLmhhc093blByb3BlcnR5KGspKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbCsrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIGVzY2FwZUZvclJlZ2V4KHN0cjogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gc3RyLnJlcGxhY2UoL1stXFwvXFxcXF4kKis/LigpfFtcXF1dL2csICdcXFxcJCYnKTtcclxuICAgIH1cclxufVxyXG4iLCJpbXBvcnQge0FwcH0gZnJvbSAnLi9BcHAnO1xyXG5cclxubmV3IEFwcCh7XHJcbiAgICBzZXJ2ZXJVcmk6ICdodHRwOi8vYXBpLWRldi5qc2JlbmNoLm9yZy92MicsXHJcbiAgICBjbGllbnRVcmk6ICdodHRwOi8vJyArIHdpbmRvdy5sb2NhdGlvbi5ob3N0XHJcbn0pO1xyXG4iXX0=
