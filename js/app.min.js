(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
"use strict";
var Http_1 = require('./Http');
var Page_1 = require('./Page');
var TestCase_1 = require('./TestCase');
var Router_1 = require('./Router');
var App = (function () {
    function App(config) {
        console.log('App starting ...');
        App.config = config;
        App.http = new Http_1.Http();
        this.router = new Router_1.Router();
        this.registerHandlebarsHelpers();
        this.router.addRoute('/', function () {
            Q.fcall(function () {
                var testCase = new TestCase_1.TestCase(TestCase_1.TestCase.createEmptyEntity());
                return new Page_1.Page(testCase);
            }).then(function (page) {
                page.render();
            });
        });
        this.router.addRoute('/test/{slug}', function (slug) {
            return App.http.getJSON(App.config.serverUri + "/test/" + slug + ".json").then(function (r) {
                var testCase = new TestCase_1.TestCase(r.getBody());
                return new Page_1.Page(testCase);
            }).then(function (page) {
                page.render();
            });
        });
        this.router.run().then(function (a) {
            console.log('Page rendered.');
        }, function (error) {
            Page_1.Page.renderErrorPopup(error.message);
            window.location.href = '/';
        });
    }
    App.prototype.registerHandlebarsHelpers = function () {
        Handlebars.registerHelper('if_eq', function (a, b, opts) {
            if (a === b) {
                return opts.fn(this);
            }
            else {
                return opts.inverse(this);
            }
        });
        Handlebars.registerHelper('if_sm', function (a, b, opts) {
            if (a < b) {
                return opts.fn(this);
            }
            else {
                return opts.inverse(this);
            }
        });
        Handlebars.registerHelper('timestamp', function () {
            return (new Date()).getTime();
        });
    };
    App.prototype.bindErrorLogging = function () {
        if (!('onerror' in window)) {
            return false;
        }
        var timeStamp = (new Date()).getTime();
        window.onerror = function (msg, url, lineNo, columnNo, error) {
            var diff = (new Date()).getTime() - timeStamp;
            var minutesDifference = Math.floor(diff / 1000 / 60);
            console.log('Minutes difference: ', minutesDifference);
            var errorDTO = {
                msg: msg,
                url: url || window.location.href,
                lineNo: lineNo,
                colNo: columnNo,
                trace: error.toString()
            };
            App.http.postJSON(App.config.serverUri + "/log.json", errorDTO).then(function () {
                timeStamp = (new Date()).getTime();
            });
        };
    };
    ;
    return App;
}());
exports.App = App;
},{"./Http":2,"./Page":3,"./Router":4,"./TestCase":6}],2:[function(require,module,exports){
"use strict";
var Http = (function () {
    function Http() {
    }
    Http.fromStringToJSON = function (str) {
        return str ? JSON.parse(str) : {};
    };
    Http.fromJSONToString = function (jsonObj) {
        return JSON.stringify(jsonObj);
    };
    Http.contentTypeIsJSON = function (header) {
        if (!header) {
            return false;
        }
        return !!header.match(/application\/json/i);
    };
    Http.prototype.sendRequest = function (request) {
        var deferred = Q.defer();
        var xhr = typeof XMLHttpRequest !== 'undefined' ? new XMLHttpRequest() : null;
        xhr.open(request.getMethod(), request.getUrl(), true);
        (function (headers) {
            for (var i in headers) {
                if (headers.hasOwnProperty(i)) {
                    xhr.setRequestHeader(i, headers[i]);
                }
            }
        })(request.getHeaders());
        var _response = this._response;
        xhr.onload = function () {
            if (xhr.readyState === Http.XHR_DONE) {
                _response = new Response(xhr.status, xhr.response);
                if (Http.contentTypeIsJSON(this.getResponseHeader('content-type'))) {
                    _response.setBody(Http.fromStringToJSON(_response.getBodyRaw()));
                }
                if (xhr.status === Http.HTTP_SUCCESS || xhr.status === Http.HTTP_CREATED) {
                    deferred.resolve(_response);
                }
                else {
                    deferred.reject(_response);
                }
            }
        };
        if (request.getBody()) {
            xhr.send(request.getBody());
        }
        else {
            xhr.send();
        }
        return deferred.promise;
    };
    Object.defineProperty(Http.prototype, "request", {
        get: function () {
            return this._request;
        },
        set: function (request) {
            this._request = request;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(Http.prototype, "response", {
        get: function () {
            return this._response;
        },
        set: function (response) {
            this._response = response;
        },
        enumerable: true,
        configurable: true
    });
    Http.prototype.send = function (method, url, body) {
        return this.sendRequest(new Request(method, url, null, body));
    };
    Http.prototype.getJSON = function (url) {
        return this.sendRequest(new Request('GET', url, { 'Content-Type': 'application/json', 'Accept': 'application/json' }, null)).then(function (response) {
            return response;
        });
    };
    ;
    Http.prototype.postJSON = function (url, body) {
        var bodyString = Http.fromJSONToString(body);
        return this.sendRequest(new Request('POST', url, { 'Content-Type': 'application/json', 'Accept': 'application/json' }, bodyString)).then(function (response) {
            return response;
        });
    };
    ;
    Http.prototype.getHTML = function (url) {
        return this.sendRequest(new Request('GET', url, { 'Content-Type': 'text/html', 'Accept': 'text/html' }, null));
    };
    ;
    Http.HTTP_SUCCESS = 200;
    Http.HTTP_CREATED = 201;
    Http.HTTP_NOT_FOUND = 404;
    Http.HTTP_BAD_REQUEST = 400;
    Http.XHR_UNSENT = 0;
    Http.XHR_OPENED = 1;
    Http.XHR_HEADERS_RECEIVED = 2;
    Http.XHR_LOADING = 3;
    Http.XHR_DONE = 4;
    return Http;
}());
exports.Http = Http;
var Request = (function () {
    function Request(method, url, headers, body) {
        this.method = method;
        this.url = url;
        this.headers = headers || {};
        this.body = body;
    }
    ;
    Request.prototype.getMethod = function () {
        return this.method;
    };
    ;
    Request.prototype.getUrl = function () {
        return this.url;
    };
    ;
    Request.prototype.getHeaders = function () {
        return this.headers;
    };
    ;
    Request.prototype.getBody = function () {
        return this.body;
    };
    ;
    return Request;
}());
var Response = (function () {
    function Response(status, body) {
        this.status = status;
        this.body = body;
        this.bodyRaw = body;
    }
    ;
    Response.prototype.setStatus = function (status) {
        this.status = status;
    };
    ;
    Response.prototype.getStatus = function () {
        return this.status;
    };
    ;
    Response.prototype.setBody = function (body) {
        this.body = body;
    };
    ;
    Response.prototype.getBody = function () {
        return this.body;
    };
    ;
    Response.prototype.getBodyRaw = function () {
        return this.bodyRaw;
    };
    return Response;
}());
},{}],3:[function(require,module,exports){
"use strict";
var TestCase_1 = require('./TestCase');
var App_1 = require('./App');
var Runner_1 = require('./Runner');
var TotalChartPanel_1 = require('./TotalChartPanel');
var Page = (function () {
    function Page(testCase) {
        console.log('TestCase constructor ...');
        this.testCase = testCase;
    }
    Page.renderElem = function (id, html, data) {
        var $elem = document.getElementById(id);
        var template = Handlebars.compile(html);
        $elem.innerHTML = template(data);
    };
    Page.prototype.render = function () {
        var _this = this;
        App_1.App.http.getHTML(App_1.App.config.clientUri + '/tpl/testcase-sidebar-form.hbs')
            .then(function (r) {
            Page.renderElem('testcase-sidebar-form', r.getBody(), _this.testCase);
        })
            .then(function () {
            _this.bindSaveBtn();
            _this.bindRunBtn();
        });
        Q.spread([
            App_1.App.http.getHTML(App_1.App.config.clientUri + '/tpl/testcase-sidebar-listing.hbs')
        ], function (dataR, tplR) {
            Page.renderElem('testcase-sidebar-listing', dataR.getBody(), tplR.getBody());
        });
        Q.spread([
            App_1.App.http.getHTML(App_1.App.config.clientUri + '/tpl/testcase-entry-form.hbs'),
            App_1.App.http.getHTML(App_1.App.config.clientUri + '/tpl/testcase-main-form.hbs')
        ], function (tplEntryR, tplMainR) {
            Handlebars.registerPartial('entry', tplEntryR.getBody());
            Page.renderElem('testcase-main-form', tplMainR.getBody(), _this.testCase);
        }).then(function () {
            _this.bindAddTestEntryBtn();
        });
    };
    Page.renderErrorPopup = function (error) {
        var msgTxt = 'Some kind of error occurred.';
        if (typeof error === 'object' && typeof error.error !== 'undefined' && error.error.message) {
            msgTxt = error.error.message;
        }
        else if (typeof error === 'string') {
            msgTxt = error;
        }
        window.alert(msgTxt);
    };
    Page.prototype.renderChartPanel = function () {
        var panel = new TotalChartPanel_1.TotalChartPanel(this, this.testCase);
        panel.getData().then(function (r) {
            panel.render(r.getBody());
        }, function (response) {
            Page.renderErrorPopup(response.getBody());
        });
    };
    ;
    Page.prototype.bindSaveBtn = function () {
        var $saveBtn = document.getElementById('save-testcase-button');
        $saveBtn.addEventListener('click', function (e) {
            e.preventDefault();
            Page.toggleRenderBtn('save-testcase-button', 'disable');
            var testCaseDTO = TestCase_1.TestCase.createEntityFromDOMElement('wrapper');
            testCaseDTO.env = {
                browserName: platform.name,
                browserVersion: platform.version,
                os: platform.os
            };
            App_1.App.http.postJSON(App_1.App.config.serverUri + '/tests.json', testCaseDTO)
                .then(function () {
                Page.toggleRenderBtn('save-testcase-button', 'activate');
            }, function (response) {
                Page.toggleRenderBtn('save-testcase-button', 'activate');
                Page.renderErrorPopup(response.getBody());
            });
        });
    };
    Page.prototype.bindRunBtn = function () {
        var _page = this;
        var $runBtn = document.getElementById('run-testcase-button');
        $runBtn.addEventListener('click', function (e) {
            e.preventDefault();
            Page.toggleRenderBtn('run-testcase-button', 'disable');
            var testCaseDTO = TestCase_1.TestCase.createEntityFromDOMElement('wrapper');
            testCaseDTO.env = {
                browserName: platform.name,
                browserVersion: platform.version,
                os: platform.os
            };
            App_1.App.http.getHTML(App_1.App.config.clientUri + "/tpl/testcase-results-table.hbs")
                .then(function (r) {
                Page.renderElem('results', r.getBody(), testCaseDTO);
                var runner = new Runner_1.Runner(new TestCase_1.TestCase(testCaseDTO));
                runner.run().then(function (results) {
                    Page.toggleRenderBtn('run-testcase-button', 'activate');
                    _page.sendResults(results).then(function () {
                        console.log('Rendering Chart Panel ...');
                        _page.renderChartPanel();
                    });
                }, function (error) {
                    Page.renderErrorPopup(error);
                });
            });
        }, false);
    };
    Page.prototype.bindAddTestEntryBtn = function () {
        var _this = this;
        var $btn = document.getElementById('add-test-link');
        $btn.addEventListener('click', function (e) {
            e.preventDefault();
            console.log('click?');
            App_1.App.http.getHTML(App_1.App.config.clientUri + "/tpl/testcase-entry-form.hbs").then(function (response) {
                var entryId = Page.getNextTestCaseEntryId();
                var newTestEntry = TestCase_1.TestCase.createEmptyTestCaseEntry(entryId);
                _this.testCase.addEntry(newTestEntry);
                var template = Handlebars.compile(response.getBody());
                var html = template(newTestEntry);
                var $newEntry = document.createElement('div');
                $newEntry.innerHTML = html;
                var $entries = document.getElementById('entries');
                $entries.appendChild($newEntry.firstChild);
                _this.bindRemoveTestEntryBtn(entryId);
            });
        });
    };
    ;
    Page.prototype.bindRemoveTestEntryBtn = function (entryId) {
        var _this = this;
        var $entries = document.getElementById('entries');
        var $entry = document.getElementById('testcase-test-' + entryId);
        var $button = $entry.getElementsByClassName('testcase-test-remove');
        $button[0].addEventListener('click', function (e) {
            console.log('click?');
            _this.testCase.removeEntry(entryId);
            $entries.removeChild($entry);
        });
    };
    ;
    Page.getNextTestCaseEntryId = function () {
        return document.getElementsByClassName('testcase-test').length + 1;
    };
    Page.toggleRenderBtn = function (id, status) {
        var $btn = document.getElementById(id);
        if (status === 'activate') {
            $btn.classList.remove('btn-loading');
            $btn.disabled = false;
        }
        else {
            $btn.className += ' btn-loading';
            $btn.disabled = true;
        }
    };
    Page.prototype.sendResults = function (results) {
        var testCaseDTO = TestCase_1.TestCase.createEntityFromDOMElement('wrapper');
        for (var i in results) {
            if (!results.hasOwnProperty(i)) {
                continue;
            }
            testCaseDTO.entries[i].results = results[i];
        }
        testCaseDTO.env = {
            browserName: platform.name,
            browserVersion: platform.version,
            os: platform.os
        };
        console.log(testCaseDTO, JSON.stringify(testCaseDTO));
        this.testCase = TestCase_1.TestCase.create(testCaseDTO);
        return App_1.App.http.postJSON(App_1.App.config.serverUri + "/tests.json", testCaseDTO);
    };
    ;
    return Page;
}());
exports.Page = Page;
},{"./App":1,"./Runner":5,"./TestCase":6,"./TotalChartPanel":7}],4:[function(require,module,exports){
"use strict";
var Router = (function () {
    function Router() {
        this.routes = [];
    }
    Router.prototype.run = function (customPath) {
        var deferred = Q.defer();
        var path = customPath ? customPath : window.location.pathname;
        var route = this.matchRoute(path);
        if (route) {
            deferred.resolve(route.action.apply(null, route.args));
        }
        else {
            deferred.reject(new Error('No valid route found.'));
        }
        return deferred.promise;
    };
    Router.prototype.addRoute = function (path, action) {
        if (!path || !action) {
            return false;
        }
        this.routes.push({
            path: path,
            action: action
        });
    };
    Router.prototype.matchRoute = function (path) {
        var matchFound;
        var preparedPath;
        for (var i = 0; i < this.routes.length; i++) {
            preparedPath = "^" + Router.preparePath(this.routes[i].path) + "$";
            matchFound = path.match(new RegExp(preparedPath, 'i'));
            if (matchFound) {
                var args = matchFound.slice(1, matchFound.length);
                return {
                    path: this.routes[i].path,
                    action: this.routes[i].action,
                    args: args,
                    requestedPath: path
                };
            }
        }
    };
    Router.preparePath = function (path) {
        return path.replace(/{[a-z]+}/g, '([a-z0-9-]+)');
    };
    return Router;
}());
exports.Router = Router;
},{}],5:[function(require,module,exports){
"use strict";
var Runner = (function () {
    function Runner(testCase) {
        this.testCase = testCase;
    }
    Runner.prototype.run = function () {
        if (!this.testCase.isReadyToRun()) {
            throw new Error('You need to have at least two code entries in order to run the test case.');
        }
        console.log('Starting runner ...');
        return this.startBench();
    };
    Runner.prototype.startBench = function () {
        var deferredQ = Q.defer();
        var testCase = this.testCase;
        var benches = [];
        var bench;
        var results = {};
        for (var j in testCase.entries) {
            if (!testCase.entries.hasOwnProperty(j)) {
                continue;
            }
            bench = new Benchmark(testCase.entries[j].title, {
                id: j,
                async: true,
                setup: testCase.harness.setUp,
                teardown: testCase.harness.tearDown,
                fn: testCase.entries[j].code,
                onStart: function (e) {
                    var benchResult = e.target;
                    Runner.renderResult(benchResult.id, 'Starting ...');
                },
                onComplete: function (e) {
                    var benchResult = e.target;
                    results[benchResult.id] = {
                        id: benchResult.id,
                        error: benchResult.error ? Benchmark.join(benchResult.error) : null,
                        opsPerSec: benchResult.hz.toFixed(benchResult.hz < 100 ? 2 : 0),
                        opsPerSecFormatted: Benchmark.formatNumber(benchResult.hz.toFixed(benchResult.hz < 100 ? 2 : 0)),
                        pm: benchResult.stats.rme.toFixed(2),
                        runSamples: benchResult.stats.sample.length
                    };
                    Runner.renderResult(benchResult.id, results[benchResult.id].opsPerSecFormatted + ' (&plusmn;' + results[benchResult.id].pm + ')');
                }
            });
            benches.push(bench);
        }
        setTimeout(function () {
            Benchmark.invoke(benches, {
                name: 'run',
                args: true,
                onStart: function (e) {
                    console.log('Starting benchmarks ...', e);
                },
                onCycle: function (e) {
                    console.log('onCycle here.', e);
                },
                onError: function (e) {
                    console.log('onError here.', e);
                    deferredQ.reject(new Error('Running suite returned an error.'));
                },
                onComplete: function (e) {
                    console.log('onComplete here.', e, results);
                    Runner.renderWinnerResult(Benchmark.filter(benches, 'fastest')[0].id);
                    Runner.renderLoserResult(Benchmark.filter(benches, 'slowest')[0].id);
                    deferredQ.resolve(results);
                }
            });
        }, 2000);
        return deferredQ.promise;
    };
    Runner.renderResult = function (id, text) {
        var $elem = document.getElementById('testcase-test-result-text-' + id);
        $elem.innerHTML = text;
    };
    ;
    Runner.renderWinnerResult = function (id) {
        var $elem = document.getElementById('testcase-test-result-text-' + id);
        $elem.className += ' success';
    };
    ;
    Runner.renderLoserResult = function (id) {
        var $elem = document.getElementById('testcase-test-result-text-' + id);
        $elem.className += ' danger';
    };
    ;
    return Runner;
}());
exports.Runner = Runner;
},{}],6:[function(require,module,exports){
"use strict";
var Utils_1 = require('./Utils');
var TestCase = (function () {
    function TestCase(testCase) {
        this.title = testCase.title;
        this.slug = testCase.slug;
        this.description = testCase.description;
        this.status = testCase.status;
        this.harness = testCase.harness;
        this.entries = testCase.entries;
        this.env = testCase.env;
    }
    Object.defineProperty(TestCase.prototype, "title", {
        get: function () {
            return this._title;
        },
        set: function (title) {
            this._title = title;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TestCase.prototype, "slug", {
        get: function () {
            return this._slug;
        },
        set: function (slug) {
            this._slug = slug;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TestCase.prototype, "description", {
        get: function () {
            return this._description;
        },
        set: function (description) {
            this._description = description;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TestCase.prototype, "status", {
        get: function () {
            return this._status;
        },
        set: function (status) {
            this._status = status;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TestCase.prototype, "harness", {
        get: function () {
            return this._harness;
        },
        set: function (harness) {
            this._harness = harness;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(TestCase.prototype, "entries", {
        get: function () {
            return this._entries;
        },
        set: function (entries) {
            this._entries = entries;
        },
        enumerable: true,
        configurable: true
    });
    TestCase.prototype.addEntry = function (entry) {
        this._entries[entry.id] = entry;
    };
    TestCase.prototype.removeEntry = function (id) {
        delete this._entries[id];
    };
    Object.defineProperty(TestCase.prototype, "env", {
        get: function () {
            return this._env;
        },
        set: function (env) {
            this._env = env;
        },
        enumerable: true,
        configurable: true
    });
    TestCase.prototype.isReadyToRun = function () {
        return (Utils_1.Util.getObjLength(this.entries) > 2);
    };
    TestCase.create = function (testCaseEntity) {
        return new TestCase(testCaseEntity);
    };
    TestCase.createEmptyEntity = function () {
        return {
            title: '',
            slug: Utils_1.Util.randomString(10),
            description: '',
            status: 'public',
            harness: {
                html: '',
                setUp: '',
                tearDown: ''
            },
            entries: [
                { id: 1, title: '', code: '' },
                { id: 2, title: '', code: '' }
            ]
        };
    };
    TestCase.createEntityFromDOMElement = function (id) {
        var $elem = document.getElementById(id);
        var result = formToObject($elem);
        return result.testCase;
    };
    TestCase.createEmptyTestCaseEntry = function (id) {
        return {
            id: id,
            title: '',
            code: ''
        };
    };
    return TestCase;
}());
exports.TestCase = TestCase;
},{"./Utils":8}],7:[function(require,module,exports){
"use strict";
var App_1 = require('./App');
var TotalChartPanel = (function () {
    function TotalChartPanel(page, testCase) {
        this.page = page;
        this.testCase = testCase;
    }
    TotalChartPanel.prototype.getData = function () {
        return App_1.App.http.getJSON(App_1.App.config.serverUri + "/test/" + this.testCase.slug + "/totals/by-browser.json");
    };
    TotalChartPanel.prototype.render = function (data) {
        var _this = this;
        var $chartDiv = document.getElementById('chart-div');
        if ($chartDiv.className === 'rendered') {
            this._render(data);
        }
        else {
            google.charts.load('current', { packages: ['corechart', 'bar'] });
            google.charts.setOnLoadCallback(function () {
                _this._render(data);
            });
        }
    };
    TotalChartPanel.prototype._render = function (data) {
        var $chartDiv = document.getElementById('chart-div');
        var chart = new google.visualization.BarChart($chartDiv);
        var browsers = [];
        var resultsSet = [];
        data.map(function (entry) {
            var entryResults = {
                title: entry.title
            };
            entry.totals.forEach(function (total) {
                var browserIdentifier = total.browserName;
                if (browsers.indexOf(browserIdentifier) === -1) {
                    browsers.push(browserIdentifier);
                }
                entryResults[browserIdentifier] = parseInt(total.metricValue);
            });
            resultsSet.push(_.map(entryResults));
        });
        browsers.unshift('Total');
        resultsSet.unshift(browsers);
        var options = {
            legend: {
                position: 'bottom'
            },
            bars: 'horizontal',
            chartArea: {
                width: '80%',
                'height': '80%'
            }
        };
        chart.draw(google.visualization.arrayToDataTable(resultsSet), options);
        $chartDiv.className = 'rendered';
    };
    return TotalChartPanel;
}());
exports.TotalChartPanel = TotalChartPanel;
},{"./App":1}],8:[function(require,module,exports){
"use strict";
var Util = (function () {
    function Util() {
    }
    Util.randomString = function (len, charSet) {
        charSet = charSet || 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
        var randomString = '';
        for (var i = 0; i < len; i++) {
            var randomPoz = Math.floor(Math.random() * charSet.length);
            randomString += charSet.substring(randomPoz, randomPoz + 1);
        }
        return randomString;
    };
    Util.getObjLength = function (o) {
        if (typeof o !== 'object' || o === null) {
            return 0;
        }
        var l = 0;
        var k;
        if (typeof Object.keys === 'function') {
            l = Object.keys(o).length;
        }
        else {
            for (k in o) {
                if (o.hasOwnProperty(k)) {
                    l++;
                }
            }
        }
        return l;
    };
    Util.escapeForRegex = function (str) {
        return str.replace(/[-\/\\^$*+?.()|[\]]/g, '\\$&');
    };
    return Util;
}());
exports.Util = Util;
},{}],9:[function(require,module,exports){
"use strict";
var App_1 = require('./App');
var serverUri = window.location.host === 'jsbench.org' ? 'http://api.jsbench.org/v2' : 'http://api-dev.jsbench.org/v2';
var clientUri = 'http://' + window.location.host;
new App_1.App({
    serverUri: serverUri,
    clientUri: clientUri
});
},{"./App":1}]},{},[9])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJ0cy9BcHAudHMiLCJ0cy9IdHRwLnRzIiwidHMvUGFnZS50cyIsInRzL1JvdXRlci50cyIsInRzL1J1bm5lci50cyIsInRzL1Rlc3RDYXNlLnRzIiwidHMvVG90YWxDaGFydFBhbmVsLnRzIiwidHMvVXRpbHMudHMiLCJ0cy9pbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7QUNBQSxxQkFBMEMsUUFBUSxDQUFDLENBQUE7QUFDbkQscUJBQW1CLFFBQVEsQ0FBQyxDQUFBO0FBQzVCLHlCQUF1QyxZQUFZLENBQUMsQ0FBQTtBQUNwRCx1QkFBcUIsVUFBVSxDQUFDLENBQUE7QUFHaEM7SUFLSSxhQUFtQixNQUEwQjtRQUN6QyxPQUFPLENBQUMsR0FBRyxDQUFDLGtCQUFrQixDQUFDLENBQUM7UUFDaEMsR0FBRyxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7UUFDcEIsR0FBRyxDQUFDLElBQUksR0FBRyxJQUFJLFdBQUksRUFBRSxDQUFDO1FBQ3RCLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxlQUFNLEVBQUUsQ0FBQztRQUMzQixJQUFJLENBQUMseUJBQXlCLEVBQUUsQ0FBQztRQUdqQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxHQUFHLEVBQUU7WUFDdEIsQ0FBQyxDQUFDLEtBQUssQ0FBQztnQkFDSixJQUFJLFFBQVEsR0FBRyxJQUFJLG1CQUFRLENBQUMsbUJBQVEsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDLENBQUM7Z0JBQzFELE1BQU0sQ0FBQyxJQUFJLFdBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUM5QixDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBUyxJQUFVO2dCQUN2QixJQUFJLENBQUMsTUFBTSxFQUFFLENBQUM7WUFDbEIsQ0FBQyxDQUFDLENBQUM7UUFDUCxDQUFDLENBQUMsQ0FBQztRQUVI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QUFDLENBQUMsQ0FBQyxDQUFDO29CQUN0QixDQUFDLEVBQUUsQ0FBQztnQkFDUixDQUFDO1lBQ0wsQ0FBQztRQUNMLENBQUM7UUFFRCxNQUFNLENBQUMsQ0FBQyxDQUFDO0lBQ2IsQ0FBQztJQUVhLG1CQUFjLEdBQTVCLFVBQTZCLEdBQVc7UUFDcEMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsc0JBQXNCLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDdkQsQ0FBQztJQUNMLFdBQUM7QUFBRCxDQXpDQSxBQXlDQyxJQUFBO0FBekNZLFlBQUksT0F5Q2hCLENBQUE7OztBQ3pDRCxvQkFBa0IsT0FBTyxDQUFDLENBQUE7QUFFMUIsSUFBSSxTQUFTLEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLEtBQUssYUFBYSxHQUFHLDJCQUEyQixHQUFHLCtCQUErQixDQUFDO0FBQ3ZILElBQUksU0FBUyxHQUFHLFNBQVMsR0FBRyxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQztBQUVqRCxJQUFJLFNBQUcsQ0FBQztJQUNKLFNBQVMsRUFBRSxTQUFTO0lBQ3BCLFNBQVMsRUFBRyxTQUFTO0NBQ3hCLENBQUMsQ0FBQyIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJpbXBvcnQge0h0dHAsIEh0dHBSZXNwb25zZUludGVyZmFjZX0gZnJvbSAnLi9IdHRwJztcclxuaW1wb3J0IHtQYWdlfSBmcm9tICcuL1BhZ2UnO1xyXG5pbXBvcnQge1Rlc3RDYXNlLCBUZXN0Q2FzZUVudGl0eX0gZnJvbSAnLi9UZXN0Q2FzZSc7XHJcbmltcG9ydCB7Um91dGVyfSBmcm9tICcuL1JvdXRlcic7XHJcbmltcG9ydCBQcm9taXNlID0gUS5Qcm9taXNlO1xyXG5cclxuZXhwb3J0IGNsYXNzIEFwcCB7XHJcbiAgICBwdWJsaWMgc3RhdGljIGNvbmZpZzogQXBwQ29uZmlnSW50ZXJmYWNlO1xyXG4gICAgcHVibGljIHN0YXRpYyBodHRwOiBIdHRwO1xyXG4gICAgcHVibGljIHJvdXRlcjogUm91dGVyO1xyXG5cclxuICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcihjb25maWc6IEFwcENvbmZpZ0ludGVyZmFjZSkge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdBcHAgc3RhcnRpbmcgLi4uJyk7XHJcbiAgICAgICAgQXBwLmNvbmZpZyA9IGNvbmZpZztcclxuICAgICAgICBBcHAuaHR0cCA9IG5ldyBIdHRwKCk7XHJcbiAgICAgICAgdGhpcy5yb3V0ZXIgPSBuZXcgUm91dGVyKCk7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlckhhbmRsZWJhcnNIZWxwZXJzKCk7XHJcblxyXG4gICAgICAgIC8vIEFkZCAnZGVmYXVsdCcgcm91dGVzLlxyXG4gICAgICAgIHRoaXMucm91dGVyLmFkZFJvdXRlKCcvJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIFEuZmNhbGwoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGVzdENhc2UgPSBuZXcgVGVzdENhc2UoVGVzdENhc2UuY3JlYXRlRW1wdHlFbnRpdHkoKSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFBhZ2UodGVzdENhc2UpO1xyXG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKHBhZ2U6IFBhZ2UpIHtcclxuICAgICAgICAgICAgICAgIHBhZ2UucmVuZGVyKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnJvdXRlci5hZGRSb3V0ZSgnL3Rlc3Qve3NsdWd9JywgZnVuY3Rpb24oc2x1Zzogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBBcHAuaHR0cC5nZXRKU09OKGAke0FwcC5jb25maWcuc2VydmVyVXJpfS90ZXN0LyR7c2x1Z30uanNvbmApLnRoZW4oZnVuY3Rpb24gKHI6IEh0dHBSZXNwb25zZUludGVyZmFjZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRlc3RDYXNlID0gbmV3IFRlc3RDYXNlKDxUZXN0Q2FzZUVudGl0eT5yLmdldEJvZHkoKSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFBhZ2UodGVzdENhc2UpO1xyXG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKHBhZ2U6IFBhZ2UpIHtcclxuICAgICAgICAgICAgICAgIHBhZ2UucmVuZGVyKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnJvdXRlci5ydW4oKS50aGVuKGZ1bmN0aW9uKGEpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1BhZ2UgcmVuZGVyZWQuJyk7XHJcbiAgICAgICAgfSwgZnVuY3Rpb24oZXJyb3I6IEVycm9yKSB7XHJcbiAgICAgICAgICAgIFBhZ2UucmVuZGVyRXJyb3JQb3B1cChlcnJvci5tZXNzYWdlKTtcclxuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnLyc7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIHJlZ2lzdGVySGFuZGxlYmFyc0hlbHBlcnMoKSB7XHJcbiAgICAgICAgSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcignaWZfZXEnLCBmdW5jdGlvbihhOiBhbnksIGI6IGFueSwgb3B0czogYW55KSB7XHJcbiAgICAgICAgICAgIGlmIChhID09PSBiKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb3B0cy5mbih0aGlzKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBvcHRzLmludmVyc2UodGhpcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcignaWZfc20nLCBmdW5jdGlvbihhOiBhbnksIGI6IGFueSwgb3B0czogYW55KSB7XHJcbiAgICAgICAgICAgIGlmIChhIDwgYikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9wdHMuZm4odGhpcyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb3B0cy5pbnZlcnNlKHRoaXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ3RpbWVzdGFtcCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gKG5ldyBEYXRlKCkpLmdldFRpbWUoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgYmluZEVycm9yTG9nZ2luZygpIHtcclxuICAgICAgICBpZiAoISgnb25lcnJvcicgaW4gd2luZG93KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgdGltZVN0YW1wID0gKG5ldyBEYXRlKCkpLmdldFRpbWUoKTtcclxuXHJcbiAgICAgICAgd2luZG93Lm9uZXJyb3IgPSBmdW5jdGlvbihtc2csIHVybCwgbGluZU5vLCBjb2x1bW5ObywgZXJyb3IpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBkaWZmID0gKG5ldyBEYXRlKCkpLmdldFRpbWUoKSAtIHRpbWVTdGFtcDtcclxuICAgICAgICAgICAgdmFyIG1pbnV0ZXNEaWZmZXJlbmNlID0gTWF0aC5mbG9vcihkaWZmIC8gMTAwMCAvIDYwKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdNaW51dGVzIGRpZmZlcmVuY2U6ICcsIG1pbnV0ZXNEaWZmZXJlbmNlKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBlcnJvckRUTyA9IHtcclxuICAgICAgICAgICAgICAgIG1zZzogbXNnLFxyXG4gICAgICAgICAgICAgICAgdXJsOiB1cmwgfHwgd2luZG93LmxvY2F0aW9uLmhyZWYsXHJcbiAgICAgICAgICAgICAgICBsaW5lTm86IGxpbmVObyxcclxuICAgICAgICAgICAgICAgIGNvbE5vOiBjb2x1bW5ObyxcclxuICAgICAgICAgICAgICAgIHRyYWNlOiBlcnJvci50b1N0cmluZygpXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBBcHAuaHR0cC5wb3N0SlNPTihgJHtBcHAuY29uZmlnLnNlcnZlclVyaX0vbG9nLmpzb25gLCBlcnJvckRUTykudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHRpbWVTdGFtcCA9IChuZXcgRGF0ZSgpKS5nZXRUaW1lKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG59XHJcblxyXG5pbnRlcmZhY2UgQXBwQ29uZmlnSW50ZXJmYWNlIHtcclxuICAgIHNlcnZlclVyaTogc3RyaW5nO1xyXG4gICAgY2xpZW50VXJpOiBzdHJpbmc7XHJcbn1cclxuIiwiaW1wb3J0IFByb21pc2UgPSBRLlByb21pc2U7XHJcbmV4cG9ydCBjbGFzcyBIdHRwIHtcclxuICAgIHByb3RlY3RlZCBfcmVxdWVzdDogSHR0cFJlcXVlc3RJbnRlcmZhY2U7XHJcbiAgICBwcm90ZWN0ZWQgX3Jlc3BvbnNlOiBIdHRwUmVzcG9uc2VJbnRlcmZhY2U7XHJcblxyXG4gICAgLy8gSFRUUCBjb2Rlcy5cclxuICAgIHB1YmxpYyBzdGF0aWMgSFRUUF9TVUNDRVNTOiBudW1iZXIgPSAyMDA7XHJcbiAgICBwdWJsaWMgc3RhdGljIEhUVFBfQ1JFQVRFRDogbnVtYmVyID0gMjAxO1xyXG4gICAgcHVibGljIHN0YXRpYyBIVFRQX05PVF9GT1VORDogbnVtYmVyID0gNDA0O1xyXG4gICAgcHVibGljIHN0YXRpYyBIVFRQX0JBRF9SRVFVRVNUOiBudW1iZXIgPSA0MDA7XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBYSFJfVU5TRU5UOiBudW1iZXIgPSAwO1xyXG4gICAgcHVibGljIHN0YXRpYyBYSFJfT1BFTkVEOiBudW1iZXIgPSAxO1xyXG4gICAgcHVibGljIHN0YXRpYyBYSFJfSEVBREVSU19SRUNFSVZFRDogbnVtYmVyID0gMjtcclxuICAgIHB1YmxpYyBzdGF0aWMgWEhSX0xPQURJTkc6IG51bWJlciA9IDM7XHJcbiAgICBwdWJsaWMgc3RhdGljIFhIUl9ET05FOiBudW1iZXIgPSA0O1xyXG5cclxuICAgIHByb3RlY3RlZCBzdGF0aWMgZnJvbVN0cmluZ1RvSlNPTihzdHI6IHN0cmluZyk6IE9iamVjdCB7XHJcbiAgICAgICAgcmV0dXJuIHN0ciA/IEpTT04ucGFyc2Uoc3RyKSA6IHt9O1xyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBzdGF0aWMgZnJvbUpTT05Ub1N0cmluZyhqc29uT2JqOiBPYmplY3QpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShqc29uT2JqKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgc3RhdGljIGNvbnRlbnRUeXBlSXNKU09OKGhlYWRlcjogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKCFoZWFkZXIpIHsgcmV0dXJuIGZhbHNlOyB9XHJcbiAgICAgICAgcmV0dXJuICEhaGVhZGVyLm1hdGNoKC9hcHBsaWNhdGlvblxcL2pzb24vaSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNlbmRSZXF1ZXN0KHJlcXVlc3Q6IEh0dHBSZXF1ZXN0SW50ZXJmYWNlKTogUHJvbWlzZTxIdHRwUmVzcG9uc2VJbnRlcmZhY2U+IHtcclxuICAgICAgICB2YXIgZGVmZXJyZWQgPSBRLmRlZmVyPEh0dHBSZXNwb25zZUludGVyZmFjZT4oKTtcclxuICAgICAgICB2YXIgeGhyID0gdHlwZW9mIFhNTEh0dHBSZXF1ZXN0ICE9PSAndW5kZWZpbmVkJyA/IG5ldyBYTUxIdHRwUmVxdWVzdCgpIDogbnVsbDtcclxuICAgICAgICB4aHIub3BlbihyZXF1ZXN0LmdldE1ldGhvZCgpLCByZXF1ZXN0LmdldFVybCgpLCB0cnVlKTtcclxuXHJcbiAgICAgICAgKGZ1bmN0aW9uKGhlYWRlcnM6IEh0dHBIZWFkZXJzSW50ZXJmYWNlKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgaW4gaGVhZGVycykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGhlYWRlcnMuaGFzT3duUHJvcGVydHkoaSkpIHtcclxuICAgICAgICAgICAgICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihpLCBoZWFkZXJzW2ldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pKHJlcXVlc3QuZ2V0SGVhZGVycygpKTtcclxuXHJcbiAgICAgICAgdmFyIF9yZXNwb25zZSA9IHRoaXMuX3Jlc3BvbnNlO1xyXG4gICAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaWYgKHhoci5yZWFkeVN0YXRlID09PSBIdHRwLlhIUl9ET05FKSB7XHJcbiAgICAgICAgICAgICAgICBfcmVzcG9uc2UgPSBuZXcgUmVzcG9uc2UoeGhyLnN0YXR1cywgeGhyLnJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgIC8vIENvbnZlcnQgdGhlIHJlc3BvbnNlIGJvZHkgdG8gSlNPTi5cclxuICAgICAgICAgICAgICAgIC8vIEtlZXAgdGhlIHJhdyBib2R5IHVudG91Y2hlZC5cclxuICAgICAgICAgICAgICAgIGlmIChIdHRwLmNvbnRlbnRUeXBlSXNKU09OKHRoaXMuZ2V0UmVzcG9uc2VIZWFkZXIoJ2NvbnRlbnQtdHlwZScpKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIF9yZXNwb25zZS5zZXRCb2R5KEh0dHAuZnJvbVN0cmluZ1RvSlNPTihfcmVzcG9uc2UuZ2V0Qm9keVJhdygpKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoeGhyLnN0YXR1cyA9PT0gSHR0cC5IVFRQX1NVQ0NFU1MgfHwgeGhyLnN0YXR1cyA9PT0gSHR0cC5IVFRQX0NSRUFURUQpIHtcclxuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKF9yZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChfcmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgaWYgKHJlcXVlc3QuZ2V0Qm9keSgpKSB7XHJcbiAgICAgICAgICAgIHhoci5zZW5kKHJlcXVlc3QuZ2V0Qm9keSgpKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB4aHIuc2VuZCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCByZXF1ZXN0KCk6IEh0dHBSZXF1ZXN0SW50ZXJmYWNlIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fcmVxdWVzdDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0IHJlcXVlc3QocmVxdWVzdDogSHR0cFJlcXVlc3RJbnRlcmZhY2UpIHtcclxuICAgICAgICB0aGlzLl9yZXF1ZXN0ID0gcmVxdWVzdDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IHJlc3BvbnNlKCk6IEh0dHBSZXNwb25zZUludGVyZmFjZSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Jlc3BvbnNlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXQgcmVzcG9uc2UocmVzcG9uc2U6IEh0dHBSZXNwb25zZUludGVyZmFjZSkge1xyXG4gICAgICAgIHRoaXMuX3Jlc3BvbnNlID0gcmVzcG9uc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNlbmQobWV0aG9kOiBzdHJpbmcsIHVybDogc3RyaW5nLCBib2R5OiBzdHJpbmcpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zZW5kUmVxdWVzdChcclxuICAgICAgICAgICAgbmV3IFJlcXVlc3QobWV0aG9kLCB1cmwsIG51bGwsIGJvZHkpXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0SlNPTih1cmw6IHN0cmluZyk6IFByb21pc2U8SHR0cFJlc3BvbnNlSW50ZXJmYWNlPiB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VuZFJlcXVlc3QoXHJcbiAgICAgICAgICAgIG5ldyBSZXF1ZXN0KCdHRVQnLCB1cmwsIHsnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLCAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nfSwgbnVsbClcclxuICAgICAgICApLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2U6IEh0dHBSZXNwb25zZUludGVyZmFjZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHB1YmxpYyBwb3N0SlNPTih1cmw6IHN0cmluZywgYm9keTogT2JqZWN0KTogUHJvbWlzZTxIdHRwUmVzcG9uc2VJbnRlcmZhY2U+IHtcclxuICAgICAgICB2YXIgYm9keVN0cmluZyA9IEh0dHAuZnJvbUpTT05Ub1N0cmluZyhib2R5KTtcclxuICAgICAgICByZXR1cm4gdGhpcy5zZW5kUmVxdWVzdChcclxuICAgICAgICAgICAgbmV3IFJlcXVlc3QoJ1BPU1QnLCB1cmwsIHsnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLCAnQWNjZXB0JzogJ2FwcGxpY2F0aW9uL2pzb24nfSwgYm9keVN0cmluZylcclxuICAgICAgICApLnRoZW4oZnVuY3Rpb24ocmVzcG9uc2U6IEh0dHBSZXNwb25zZUludGVyZmFjZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHB1YmxpYyBnZXRIVE1MKHVybDogc3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VuZFJlcXVlc3QoXHJcbiAgICAgICAgICAgIG5ldyBSZXF1ZXN0KCdHRVQnLCB1cmwsIHsnQ29udGVudC1UeXBlJzogJ3RleHQvaHRtbCcsICdBY2NlcHQnOiAndGV4dC9odG1sJ30sIG51bGwpXHJcbiAgICAgICAgKTtcclxuICAgIH07XHJcbn1cclxuXHJcbmNsYXNzIFJlcXVlc3QgaW1wbGVtZW50cyBIdHRwUmVxdWVzdEludGVyZmFjZSB7XHJcbiAgICBwcm90ZWN0ZWQgbWV0aG9kOiBzdHJpbmc7XHJcbiAgICBwcm90ZWN0ZWQgdXJsOiBzdHJpbmc7XHJcbiAgICBwcm90ZWN0ZWQgaGVhZGVyczogSHR0cEhlYWRlcnNJbnRlcmZhY2U7XHJcbiAgICBwcm90ZWN0ZWQgYm9keTogc3RyaW5nO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKG1ldGhvZDogc3RyaW5nLCB1cmw6IHN0cmluZywgaGVhZGVyczogSHR0cEhlYWRlcnNJbnRlcmZhY2UsIGJvZHk6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMubWV0aG9kID0gbWV0aG9kO1xyXG4gICAgICAgIHRoaXMudXJsID0gdXJsO1xyXG4gICAgICAgIHRoaXMuaGVhZGVycyA9IGhlYWRlcnMgfHwge307XHJcbiAgICAgICAgdGhpcy5ib2R5ID0gYm9keTtcclxuICAgIH07XHJcblxyXG4gICAgcHVibGljIGdldE1ldGhvZCgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLm1ldGhvZDtcclxuICAgIH07XHJcblxyXG4gICAgcHVibGljIGdldFVybCgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnVybDtcclxuICAgIH07XHJcblxyXG4gICAgcHVibGljIGdldEhlYWRlcnMoKTogSHR0cEhlYWRlcnNJbnRlcmZhY2Uge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmhlYWRlcnM7XHJcbiAgICB9O1xyXG5cclxuICAgIHB1YmxpYyBnZXRCb2R5KCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYm9keTtcclxuICAgIH07XHJcbn1cclxuXHJcbmludGVyZmFjZSBIdHRwUmVxdWVzdEludGVyZmFjZSB7XHJcbiAgICBnZXRNZXRob2QoKTogc3RyaW5nO1xyXG4gICAgZ2V0VXJsKCk6IHN0cmluZztcclxuICAgIGdldEhlYWRlcnMoKTogSHR0cEhlYWRlcnNJbnRlcmZhY2U7XHJcbiAgICBnZXRCb2R5KCk6IHN0cmluZyB8IE9iamVjdDtcclxufVxyXG5cclxuY2xhc3MgUmVzcG9uc2UgaW1wbGVtZW50cyBIdHRwUmVzcG9uc2VJbnRlcmZhY2Uge1xyXG4gICAgcHJvdGVjdGVkIHN0YXR1czogbnVtYmVyO1xyXG4gICAgcHJvdGVjdGVkIGJvZHk6IHN0cmluZyB8IE9iamVjdDtcclxuICAgIHByb3RlY3RlZCBib2R5UmF3OiBzdHJpbmc7XHJcblxyXG4gICAgY29uc3RydWN0b3Ioc3RhdHVzOiBudW1iZXIsIGJvZHk6IHN0cmluZykge1xyXG4gICAgICAgIHRoaXMuc3RhdHVzID0gc3RhdHVzO1xyXG4gICAgICAgIHRoaXMuYm9keSA9IGJvZHk7XHJcbiAgICAgICAgdGhpcy5ib2R5UmF3ID0gYm9keTtcclxuICAgIH07XHJcblxyXG4gICAgcHVibGljIHNldFN0YXR1cyhzdGF0dXM6IG51bWJlcikge1xyXG4gICAgICAgIHRoaXMuc3RhdHVzID0gc3RhdHVzO1xyXG4gICAgfTtcclxuXHJcbiAgICBwdWJsaWMgZ2V0U3RhdHVzKCk6IG51bWJlciB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RhdHVzO1xyXG4gICAgfTtcclxuXHJcbiAgICBwdWJsaWMgc2V0Qm9keShib2R5OiBzdHJpbmcgfCBPYmplY3QpIHtcclxuICAgICAgICB0aGlzLmJvZHkgPSBib2R5O1xyXG4gICAgfTtcclxuXHJcbiAgICBwdWJsaWMgZ2V0Qm9keSgpOiBzdHJpbmcgfCBPYmplY3Qge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmJvZHk7XHJcbiAgICB9O1xyXG5cclxuICAgIHB1YmxpYyBnZXRCb2R5UmF3KCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYm9keVJhdztcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBIdHRwUmVzcG9uc2VJbnRlcmZhY2Uge1xyXG4gICAgZ2V0U3RhdHVzKCk6IG51bWJlcjtcclxuICAgIHNldFN0YXR1cyhzdGF0dXM6IG51bWJlcik6IHZvaWQ7XHJcbiAgICBnZXRCb2R5KCk6IHN0cmluZyB8IE9iamVjdDtcclxuICAgIHNldEJvZHkoYm9keTogc3RyaW5nIHwgT2JqZWN0KTogdm9pZDtcclxuICAgIGdldEJvZHlSYXcoKTogc3RyaW5nO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgSHR0cEhlYWRlcnNJbnRlcmZhY2Uge1xyXG4gICAgW2tleTogc3RyaW5nXTogc3RyaW5nO1xyXG59XHJcbiIsImltcG9ydCB7VGVzdENhc2UsIFRlc3RDYXNlRW52fSBmcm9tICcuL1Rlc3RDYXNlJztcclxuaW1wb3J0IHtBcHB9IGZyb20gJy4vQXBwJztcclxuaW1wb3J0IHtIdHRwUmVzcG9uc2VJbnRlcmZhY2V9IGZyb20gJy4vSHR0cCc7XHJcbmltcG9ydCB7UnVubmVyLCBSdW5uZXJSZXN1bHR9IGZyb20gJy4vUnVubmVyJztcclxuaW1wb3J0IHtUb3RhbEJ5QnJvd3NlciwgVG90YWxDaGFydFBhbmVsfSBmcm9tICcuL1RvdGFsQ2hhcnRQYW5lbCc7XHJcbmltcG9ydCBQcm9taXNlID0gUS5Qcm9taXNlO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBhZ2Uge1xyXG4gICAgcHJvdGVjdGVkIHRlc3RDYXNlOiBUZXN0Q2FzZTtcclxuXHJcbiAgICBwdWJsaWMgY29uc3RydWN0b3IodGVzdENhc2U6IFRlc3RDYXNlKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ1Rlc3RDYXNlIGNvbnN0cnVjdG9yIC4uLicpO1xyXG4gICAgICAgIHRoaXMudGVzdENhc2UgPSB0ZXN0Q2FzZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIHJlbmRlckVsZW0oaWQ6IHN0cmluZywgaHRtbDogc3RyaW5nLCBkYXRhOiBPYmplY3QpIHtcclxuICAgICAgICB2YXIgJGVsZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7XHJcbiAgICAgICAgdmFyIHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKGh0bWwpO1xyXG4gICAgICAgICRlbGVtLmlubmVySFRNTCA9IHRlbXBsYXRlKGRhdGEpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZW5kZXIoKSB7XHJcbiAgICAgICAgLy8gUmVuZGVyICdTaWRlYmFyJy5cclxuICAgICAgICBBcHAuaHR0cC5nZXRIVE1MKEFwcC5jb25maWcuY2xpZW50VXJpICsgJy90cGwvdGVzdGNhc2Utc2lkZWJhci1mb3JtLmhicycpXHJcbiAgICAgICAgICAgIC50aGVuKChyOiBIdHRwUmVzcG9uc2VJbnRlcmZhY2UpID0+IHtcclxuICAgICAgICAgICAgICAgIFBhZ2UucmVuZGVyRWxlbSgndGVzdGNhc2Utc2lkZWJhci1mb3JtJywgPHN0cmluZz5yLmdldEJvZHkoKSwgdGhpcy50ZXN0Q2FzZSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYmluZFNhdmVCdG4oKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYmluZFJ1bkJ0bigpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gUmVuZGVyICdMaXN0aW5ncycuXHJcbiAgICAgICAgUS5zcHJlYWQoW1xyXG4gICAgICAgICAgICAvLyBBcHAuaHR0cC5nZXRKU09OKEFwcC5jb25maWcuc2VydmVyVXJpICsgJy90ZXN0cy5qc29uP2V4Y2x1ZGU9cmV2aXNpb25fbnVtYmVyLGRlc2NyaXB0aW9uLGhhcm5lc3MsZW50cmllcyxzdGF0dXMmb3JkZXJCeT1sYXRlc3QmbGltaXQ9MjUnKSxcclxuICAgICAgICAgICAgQXBwLmh0dHAuZ2V0SFRNTChBcHAuY29uZmlnLmNsaWVudFVyaSArICcvdHBsL3Rlc3RjYXNlLXNpZGViYXItbGlzdGluZy5oYnMnKVxyXG4gICAgICAgIF0sIChkYXRhUjogSHR0cFJlc3BvbnNlSW50ZXJmYWNlLCB0cGxSOiBIdHRwUmVzcG9uc2VJbnRlcmZhY2UpID0+IHtcclxuICAgICAgICAgICAgUGFnZS5yZW5kZXJFbGVtKCd0ZXN0Y2FzZS1zaWRlYmFyLWxpc3RpbmcnLCA8c3RyaW5nPmRhdGFSLmdldEJvZHkoKSwgdHBsUi5nZXRCb2R5KCkpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBSZW5kZXIgJ01haW4gZm9ybScuXHJcbiAgICAgICAgUS5zcHJlYWQoW1xyXG4gICAgICAgICAgICBBcHAuaHR0cC5nZXRIVE1MKEFwcC5jb25maWcuY2xpZW50VXJpICsgJy90cGwvdGVzdGNhc2UtZW50cnktZm9ybS5oYnMnKSxcclxuICAgICAgICAgICAgQXBwLmh0dHAuZ2V0SFRNTChBcHAuY29uZmlnLmNsaWVudFVyaSArICcvdHBsL3Rlc3RjYXNlLW1haW4tZm9ybS5oYnMnKVxyXG4gICAgICAgIF0sICh0cGxFbnRyeVI6IEh0dHBSZXNwb25zZUludGVyZmFjZSwgdHBsTWFpblI6IEh0dHBSZXNwb25zZUludGVyZmFjZSkgPT4ge1xyXG4gICAgICAgICAgICBIYW5kbGViYXJzLnJlZ2lzdGVyUGFydGlhbCgnZW50cnknLCB0cGxFbnRyeVIuZ2V0Qm9keSgpKTtcclxuICAgICAgICAgICAgUGFnZS5yZW5kZXJFbGVtKCd0ZXN0Y2FzZS1tYWluLWZvcm0nLCA8c3RyaW5nPnRwbE1haW5SLmdldEJvZHkoKSwgdGhpcy50ZXN0Q2FzZSk7XHJcbiAgICAgICAgfSkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuYmluZEFkZFRlc3RFbnRyeUJ0bigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgcmVuZGVyRXJyb3JQb3B1cChlcnJvcjogRXJyb3JSZXNwb25zZURUTyB8IHN0cmluZykge1xyXG4gICAgICAgIHZhciBtc2dUeHQ6IHN0cmluZyA9ICdTb21lIGtpbmQgb2YgZXJyb3Igb2NjdXJyZWQuJztcclxuICAgICAgICBpZiAodHlwZW9mIGVycm9yID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgZXJyb3IuZXJyb3IgIT09ICd1bmRlZmluZWQnICYmIGVycm9yLmVycm9yLm1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgbXNnVHh0ID0gZXJyb3IuZXJyb3IubWVzc2FnZTtcclxuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBlcnJvciA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgbXNnVHh0ID0gZXJyb3I7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHdpbmRvdy5hbGVydChtc2dUeHQpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZW5kZXJDaGFydFBhbmVsKCkge1xyXG4gICAgICAgIHZhciBwYW5lbCA9IG5ldyBUb3RhbENoYXJ0UGFuZWwodGhpcywgdGhpcy50ZXN0Q2FzZSk7XHJcbiAgICAgICAgcGFuZWwuZ2V0RGF0YSgpLnRoZW4oKHI6IEh0dHBSZXNwb25zZUludGVyZmFjZSkgPT4ge1xyXG4gICAgICAgICAgICBwYW5lbC5yZW5kZXIoPFRvdGFsQnlCcm93c2VyW10+ci5nZXRCb2R5KCkpO1xyXG4gICAgICAgIH0sIGZ1bmN0aW9uKHJlc3BvbnNlOiBIdHRwUmVzcG9uc2VJbnRlcmZhY2UpIHtcclxuICAgICAgICAgICAgUGFnZS5yZW5kZXJFcnJvclBvcHVwKDxFcnJvclJlc3BvbnNlRFRPPnJlc3BvbnNlLmdldEJvZHkoKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHByb3RlY3RlZCBiaW5kU2F2ZUJ0bigpIHtcclxuICAgICAgICB2YXIgJHNhdmVCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2F2ZS10ZXN0Y2FzZS1idXR0b24nKTtcclxuXHJcbiAgICAgICAgJHNhdmVCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICBQYWdlLnRvZ2dsZVJlbmRlckJ0bignc2F2ZS10ZXN0Y2FzZS1idXR0b24nLCAnZGlzYWJsZScpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHRlc3RDYXNlRFRPID0gVGVzdENhc2UuY3JlYXRlRW50aXR5RnJvbURPTUVsZW1lbnQoJ3dyYXBwZXInKTtcclxuICAgICAgICAgICAgLy8gQXBwZW5kIHRoZSBicm93c2VyIGRhdGEuXHJcbiAgICAgICAgICAgIHRlc3RDYXNlRFRPLmVudiA9IDxUZXN0Q2FzZUVudj57XHJcbiAgICAgICAgICAgICAgICBicm93c2VyTmFtZTogcGxhdGZvcm0ubmFtZSxcclxuICAgICAgICAgICAgICAgIGJyb3dzZXJWZXJzaW9uOiBwbGF0Zm9ybS52ZXJzaW9uLFxyXG4gICAgICAgICAgICAgICAgb3M6IHBsYXRmb3JtLm9zXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBBcHAuaHR0cC5wb3N0SlNPTihBcHAuY29uZmlnLnNlcnZlclVyaSArICcvdGVzdHMuanNvbicsIHRlc3RDYXNlRFRPKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgUGFnZS50b2dnbGVSZW5kZXJCdG4oJ3NhdmUtdGVzdGNhc2UtYnV0dG9uJywgJ2FjdGl2YXRlJyk7XHJcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbihyZXNwb25zZTogSHR0cFJlc3BvbnNlSW50ZXJmYWNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgUGFnZS50b2dnbGVSZW5kZXJCdG4oJ3NhdmUtdGVzdGNhc2UtYnV0dG9uJywgJ2FjdGl2YXRlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgUGFnZS5yZW5kZXJFcnJvclBvcHVwKDxFcnJvclJlc3BvbnNlRFRPPnJlc3BvbnNlLmdldEJvZHkoKSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgYmluZFJ1bkJ0bigpIHtcclxuICAgICAgICB2YXIgX3BhZ2UgPSB0aGlzO1xyXG4gICAgICAgIHZhciAkcnVuQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3J1bi10ZXN0Y2FzZS1idXR0b24nKTtcclxuXHJcbiAgICAgICAgLy8gJ1J1biB0ZXN0cycgYnV0dG9uLlxyXG4gICAgICAgICRydW5CdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICBQYWdlLnRvZ2dsZVJlbmRlckJ0bigncnVuLXRlc3RjYXNlLWJ1dHRvbicsICdkaXNhYmxlJyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgdGVzdENhc2VEVE8gPSBUZXN0Q2FzZS5jcmVhdGVFbnRpdHlGcm9tRE9NRWxlbWVudCgnd3JhcHBlcicpO1xyXG5cclxuICAgICAgICAgICAgLy8gQXBwZW5kIHRoZSBicm93c2VyIGRhdGEuXHJcbiAgICAgICAgICAgIHRlc3RDYXNlRFRPLmVudiA9IDxUZXN0Q2FzZUVudj57XHJcbiAgICAgICAgICAgICAgICBicm93c2VyTmFtZTogcGxhdGZvcm0ubmFtZSxcclxuICAgICAgICAgICAgICAgIGJyb3dzZXJWZXJzaW9uOiBwbGF0Zm9ybS52ZXJzaW9uLFxyXG4gICAgICAgICAgICAgICAgb3M6IHBsYXRmb3JtLm9zXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvLyBSZW5kZXIgJ1Jlc3VsdHMnIHBhbmVsIHdpdGggcHJlbGltaW5hcnkgZGF0YS5cclxuICAgICAgICAgICAgQXBwLmh0dHAuZ2V0SFRNTChgJHtBcHAuY29uZmlnLmNsaWVudFVyaX0vdHBsL3Rlc3RjYXNlLXJlc3VsdHMtdGFibGUuaGJzYClcclxuICAgICAgICAgICAgICAgIC50aGVuKChyOiBIdHRwUmVzcG9uc2VJbnRlcmZhY2UpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBQYWdlLnJlbmRlckVsZW0oJ3Jlc3VsdHMnLCA8c3RyaW5nPnIuZ2V0Qm9keSgpLCB0ZXN0Q2FzZURUTyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgSlMgY29kZSBhbmQgcnVuIGl0IGluIGJyb3dzZXIuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJ1bm5lciA9IG5ldyBSdW5uZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBUZXN0Q2FzZSh0ZXN0Q2FzZURUTylcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIHJ1bm5lci5ydW4oKS50aGVuKChyZXN1bHRzOiBSdW5uZXJSZXN1bHRbXSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZS1hY3RpdmF0ZSAnUnVuJyBidG4uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFBhZ2UudG9nZ2xlUmVuZGVyQnRuKCdydW4tdGVzdGNhc2UtYnV0dG9uJywgJ2FjdGl2YXRlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNlbmQgdGhlIHRlc3QgcmVzdWx0cy5cclxuICAgICAgICAgICAgICAgICAgICAgICAgX3BhZ2Uuc2VuZFJlc3VsdHMocmVzdWx0cykudGhlbihmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVuZGVyICdDaGFydCBQYW5lbCcuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUmVuZGVyaW5nIENoYXJ0IFBhbmVsIC4uLicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3BhZ2UucmVuZGVyQ2hhcnRQYW5lbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24oZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgUGFnZS5yZW5kZXJFcnJvclBvcHVwKGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB9LCBmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvdGVjdGVkIGJpbmRBZGRUZXN0RW50cnlCdG4oKSB7XHJcbiAgICAgICAgLy8gJ0FkZCBuZXcgdGVzdCcgYnV0dG9uLlxyXG4gICAgICAgIHZhciAkYnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkZC10ZXN0LWxpbmsnKTtcclxuXHJcbiAgICAgICAgJGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsgY29uc29sZS5sb2coJ2NsaWNrPycpO1xyXG5cclxuICAgICAgICAgICAgQXBwLmh0dHAuZ2V0SFRNTChgJHtBcHAuY29uZmlnLmNsaWVudFVyaX0vdHBsL3Rlc3RjYXNlLWVudHJ5LWZvcm0uaGJzYCkudGhlbigocmVzcG9uc2U6IEh0dHBSZXNwb25zZUludGVyZmFjZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gQWRkIHRvIG1vZGVsLlxyXG4gICAgICAgICAgICAgICAgLy8gQHRvZG8gVGhpcyBzaG91bGQgYmUgdGhlIE1WQ3Mgam9iLlxyXG4gICAgICAgICAgICAgICAgdmFyIGVudHJ5SWQgPSBQYWdlLmdldE5leHRUZXN0Q2FzZUVudHJ5SWQoKTtcclxuICAgICAgICAgICAgICAgIHZhciBuZXdUZXN0RW50cnkgPSBUZXN0Q2FzZS5jcmVhdGVFbXB0eVRlc3RDYXNlRW50cnkoZW50cnlJZCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnRlc3RDYXNlLmFkZEVudHJ5KG5ld1Rlc3RFbnRyeSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gUmVuZGVyIG5ldyB0ZXN0IGVudHJ5LlxyXG4gICAgICAgICAgICAgICAgdmFyIHRlbXBsYXRlID0gSGFuZGxlYmFycy5jb21waWxlKHJlc3BvbnNlLmdldEJvZHkoKSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgaHRtbCA9IHRlbXBsYXRlKG5ld1Rlc3RFbnRyeSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgJG5ld0VudHJ5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICAkbmV3RW50cnkuaW5uZXJIVE1MID0gaHRtbDtcclxuICAgICAgICAgICAgICAgIHZhciAkZW50cmllcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbnRyaWVzJyk7XHJcbiAgICAgICAgICAgICAgICAkZW50cmllcy5hcHBlbmRDaGlsZCgkbmV3RW50cnkuZmlyc3RDaGlsZCk7XHJcbiAgICAgICAgICAgICAgICAvLyBCaW5kIGV2ZW50cyB0byBpdC5cclxuICAgICAgICAgICAgICAgIHRoaXMuYmluZFJlbW92ZVRlc3RFbnRyeUJ0bihlbnRyeUlkKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHByb3RlY3RlZCBiaW5kUmVtb3ZlVGVzdEVudHJ5QnRuKGVudHJ5SWQ6IG51bWJlcikge1xyXG4gICAgICAgIHZhciAkZW50cmllcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbnRyaWVzJyk7XHJcbiAgICAgICAgdmFyICRlbnRyeSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0ZXN0Y2FzZS10ZXN0LScgKyBlbnRyeUlkKTtcclxuICAgICAgICB2YXIgJGJ1dHRvbiA9ICRlbnRyeS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCd0ZXN0Y2FzZS10ZXN0LXJlbW92ZScpO1xyXG5cclxuICAgICAgICAkYnV0dG9uWzBdLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2NsaWNrPycpO1xyXG5cclxuICAgICAgICAgICAgLy8gUmVtb3ZlIGZyb20gbW9kZWwuXHJcbiAgICAgICAgICAgIC8vIEB0b2RvIFRoaXMgc2hvdWxkIGJlIHRoZSBNVkNzIGpvYi5cclxuICAgICAgICAgICAgdGhpcy50ZXN0Q2FzZS5yZW1vdmVFbnRyeShlbnRyeUlkKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFJlbW92ZSBmcm9tIERPTS5cclxuICAgICAgICAgICAgJGVudHJpZXMucmVtb3ZlQ2hpbGQoJGVudHJ5KTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgcHJvdGVjdGVkIHN0YXRpYyBnZXROZXh0VGVzdENhc2VFbnRyeUlkKCkge1xyXG4gICAgICAgIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCd0ZXN0Y2FzZS10ZXN0JykubGVuZ3RoICsgMTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc3RhdGljIHRvZ2dsZVJlbmRlckJ0bihpZDogc3RyaW5nLCBzdGF0dXM6IHN0cmluZykge1xyXG4gICAgICAgIHZhciAkYnRuID0gPEhUTUxCdXR0b25FbGVtZW50PmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcclxuXHJcbiAgICAgICAgaWYgKHN0YXR1cyA9PT0gJ2FjdGl2YXRlJykge1xyXG4gICAgICAgICAgICAkYnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2J0bi1sb2FkaW5nJyk7XHJcbiAgICAgICAgICAgICRidG4uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkYnRuLmNsYXNzTmFtZSArPSAnIGJ0bi1sb2FkaW5nJztcclxuICAgICAgICAgICAgJGJ0bi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZW5kUmVzdWx0cyhyZXN1bHRzOiBSdW5uZXJSZXN1bHRbXSk6IFByb21pc2U8SHR0cFJlc3BvbnNlSW50ZXJmYWNlPiB7XHJcblxyXG4gICAgICAgIC8vIFJlZnJlc2ggdGhlIHRlc3RDYXNlIG9iamVjdC5cclxuICAgICAgICAvLyBAdG9kbyBNb2RlbCBpcyBub3Qga2VlcGluZyB1cCB3aXRoIERPTSBjaGFuZ2VzLiBSZWZhY3Rvci5cclxuICAgICAgICB2YXIgdGVzdENhc2VEVE8gPSBUZXN0Q2FzZS5jcmVhdGVFbnRpdHlGcm9tRE9NRWxlbWVudCgnd3JhcHBlcicpO1xyXG5cclxuICAgICAgICAvLyBBcHBlbmQgdGhlIHJlc3VsdHMuXHJcbiAgICAgICAgLy8gS2VlcCB0aGUgb3JpZ2luYWwgZm9ybSBvcmRlci5cclxuICAgICAgICAvLyBUaGF0J3Mgd2h5IHJlc3VsdHMgaXMgYW4gb2JqZWN0IHN0YXJ0aW5nIGZyb20ga2V5IDEuXHJcbiAgICAgICAgZm9yICh2YXIgaSBpbiByZXN1bHRzKSB7XHJcbiAgICAgICAgICAgIGlmICghcmVzdWx0cy5oYXNPd25Qcm9wZXJ0eShpKSkge1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGVzdENhc2VEVE8uZW50cmllc1tpXS5yZXN1bHRzID0gcmVzdWx0c1tpXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEFwcGVuZCB0aGUgYnJvd3NlciBkYXRhLlxyXG4gICAgICAgIHRlc3RDYXNlRFRPLmVudiA9IDxUZXN0Q2FzZUVudj57XHJcbiAgICAgICAgICAgIGJyb3dzZXJOYW1lOiBwbGF0Zm9ybS5uYW1lLFxyXG4gICAgICAgICAgICBicm93c2VyVmVyc2lvbjogcGxhdGZvcm0udmVyc2lvbixcclxuICAgICAgICAgICAgb3M6IHBsYXRmb3JtLm9zXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2codGVzdENhc2VEVE8sIEpTT04uc3RyaW5naWZ5KHRlc3RDYXNlRFRPKSk7XHJcblxyXG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgbW9kZWwuXHJcbiAgICAgICAgdGhpcy50ZXN0Q2FzZSA9IFRlc3RDYXNlLmNyZWF0ZSh0ZXN0Q2FzZURUTyk7XHJcblxyXG4gICAgICAgIHJldHVybiBBcHAuaHR0cC5wb3N0SlNPTihgJHtBcHAuY29uZmlnLnNlcnZlclVyaX0vdGVzdHMuanNvbmAsIHRlc3RDYXNlRFRPKTtcclxuICAgIH07XHJcblxyXG59XHJcblxyXG5pbnRlcmZhY2UgQnV0dG9uRXZlbnRUYXJnZXQgZXh0ZW5kcyBFdmVudFRhcmdldCB7XHJcbiAgICBkYXRhc2V0OiB7XHJcbiAgICAgICAgZW50cnlJZDogbnVtYmVyO1xyXG4gICAgfTtcclxufVxyXG5cclxuaW50ZXJmYWNlIEVycm9yUmVzcG9uc2VEVE8ge1xyXG4gICAgZXJyb3I6IHtcclxuICAgICAgICBtZXNzYWdlOiBzdHJpbmcsXHJcbiAgICAgICAgZGF0YTogQXJyYXk8e1xyXG4gICAgICAgICAgICByZWFzb246IHN0cmluZyxcclxuICAgICAgICAgICAgY29kZTogc3RyaW5nXHJcbiAgICAgICAgfT4sXHJcbiAgICAgICAgY29kZTogc3RyaW5nXHJcbiAgICB9O1xyXG59XHJcbiIsImltcG9ydCBkZWZlciA9IFEuZGVmZXI7XHJcbmV4cG9ydCBjbGFzcyBSb3V0ZXIge1xyXG4gICAgcHJvdGVjdGVkIHJvdXRlczogUm91dGVbXSA9IFtdO1xyXG5cclxuICAgIHB1YmxpYyBydW4oY3VzdG9tUGF0aD86IHN0cmluZykge1xyXG4gICAgICAgIHZhciBkZWZlcnJlZCA9IFEuZGVmZXIoKTtcclxuXHJcbiAgICAgICAgdmFyIHBhdGg6IHN0cmluZyA9IGN1c3RvbVBhdGggPyBjdXN0b21QYXRoIDogd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lO1xyXG4gICAgICAgIHZhciByb3V0ZSA9IHRoaXMubWF0Y2hSb3V0ZShwYXRoKTtcclxuICAgICAgICBpZiAocm91dGUpIHtcclxuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShyb3V0ZS5hY3Rpb24uYXBwbHkobnVsbCwgcm91dGUuYXJncykpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGRlZmVycmVkLnJlamVjdChuZXcgRXJyb3IoJ05vIHZhbGlkIHJvdXRlIGZvdW5kLicpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhZGRSb3V0ZShwYXRoOiBzdHJpbmcsIGFjdGlvbjogRnVuY3Rpb24pIHtcclxuICAgICAgICBpZiAoIXBhdGggfHwgIWFjdGlvbikge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLnJvdXRlcy5wdXNoKHtcclxuICAgICAgICAgICAgcGF0aDogcGF0aCxcclxuICAgICAgICAgICAgYWN0aW9uOiBhY3Rpb25cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIDEuIEdFVCAvdGVzdC9zZGFkYWFkMTIvdG90YWxzL2J5U3R1ZmYuanNvblxyXG4gICAgICogMi4gVHJ5IG1hdGNoIHdpdGggL3Rlc3Qve3Rlc3R9L3RvdGFscy97ZmlsdGVyfS5qc29uXHJcbiAgICAgKiAzLlxyXG4gICAgICogdmFyIGFhID0gXCIvdGVzdC9zZGFkYWFkMTIvdG90YWxzL2J5U3R1ZmYuanNvblwiLm1hdGNoKG5ldyBSZWdFeHAoXCJcXC90ZXN0XFwvKFthLXowLTldKylcXC90b3RhbHNcXC8oW2EtejAtOV0rKVxcLmpzb25cIiwgJ2knKSk7IGFhID0gYWEuc2xpY2UoMSwgYWEubGVuZ3RoKTtcclxuICAgICovXHJcbiAgICBwcm90ZWN0ZWQgbWF0Y2hSb3V0ZShwYXRoOiBzdHJpbmcpOiBSZXF1ZXN0ZWRSb3V0ZSB7XHJcbiAgICAgICAgdmFyIG1hdGNoRm91bmQ6IEFycmF5PHN0cmluZz47XHJcbiAgICAgICAgdmFyIHByZXBhcmVkUGF0aDogc3RyaW5nO1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5yb3V0ZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgcHJlcGFyZWRQYXRoID0gYF4ke1JvdXRlci5wcmVwYXJlUGF0aCh0aGlzLnJvdXRlc1tpXS5wYXRoKX0kYDtcclxuICAgICAgICAgICAgbWF0Y2hGb3VuZCA9IHBhdGgubWF0Y2gobmV3IFJlZ0V4cChwcmVwYXJlZFBhdGgsICdpJykpO1xyXG4gICAgICAgICAgICBpZiAobWF0Y2hGb3VuZCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBtYXRjaEZvdW5kLnNsaWNlKDEsIG1hdGNoRm91bmQubGVuZ3RoKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiA8UmVxdWVzdGVkUm91dGU+e1xyXG4gICAgICAgICAgICAgICAgICAgIHBhdGg6IHRoaXMucm91dGVzW2ldLnBhdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiB0aGlzLnJvdXRlc1tpXS5hY3Rpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgYXJnczogYXJncyxcclxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0ZWRQYXRoOiBwYXRoXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByb3RlY3RlZCBzdGF0aWMgcHJlcGFyZVBhdGgocGF0aDogc3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIHBhdGgucmVwbGFjZSgve1thLXpdK30vZywgJyhbYS16MC05LV0rKScpO1xyXG4gICAgfVxyXG59XHJcblxyXG5pbnRlcmZhY2UgUm91dGUge1xyXG4gICAgcGF0aDogc3RyaW5nO1xyXG4gICAgYWN0aW9uOiBGdW5jdGlvbjtcclxufVxyXG5cclxuaW50ZXJmYWNlIFJlcXVlc3RlZFJvdXRlIGV4dGVuZHMgUm91dGUge1xyXG4gICAgcmVxdWVzdGVkUGF0aDogc3RyaW5nO1xyXG4gICAgYXJnczogQXJyYXk8c3RyaW5nPjtcclxufVxyXG4iLCJpbXBvcnQge1Rlc3RDYXNlfSBmcm9tICcuL1Rlc3RDYXNlJztcclxuaW1wb3J0IFByb21pc2UgPSBRLlByb21pc2U7XHJcblxyXG5leHBvcnQgY2xhc3MgUnVubmVyIHtcclxuICAgIHByb3RlY3RlZCB0ZXN0Q2FzZTogVGVzdENhc2U7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHRlc3RDYXNlOiBUZXN0Q2FzZSkge1xyXG4gICAgICAgIHRoaXMudGVzdENhc2UgPSB0ZXN0Q2FzZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcnVuKCk6IFByb21pc2U8e1trZXk6IG51bWJlcl06IFJ1bm5lclJlc3VsdH0+IHtcclxuICAgICAgICBpZiAoIXRoaXMudGVzdENhc2UuaXNSZWFkeVRvUnVuKCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdZb3UgbmVlZCB0byBoYXZlIGF0IGxlYXN0IHR3byBjb2RlIGVudHJpZXMgaW4gb3JkZXIgdG8gcnVuIHRoZSB0ZXN0IGNhc2UuJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zb2xlLmxvZygnU3RhcnRpbmcgcnVubmVyIC4uLicpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN0YXJ0QmVuY2goKTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgc3RhcnRCZW5jaCgpOiBQcm9taXNlPHtba2V5OiBudW1iZXJdOiBSdW5uZXJSZXN1bHR9PiB7XHJcbiAgICAgICAgdmFyIGRlZmVycmVkUSA9IFEuZGVmZXI8e1trZXk6IG51bWJlcl06IFJ1bm5lclJlc3VsdH0+KCk7XHJcblxyXG4gICAgICAgIHZhciB0ZXN0Q2FzZSA9IHRoaXMudGVzdENhc2U7XHJcbiAgICAgICAgdmFyIGJlbmNoZXM6IEJlbmNobWFya1tdID0gW107XHJcbiAgICAgICAgdmFyIGJlbmNoOiBCZW5jaG1hcms7XHJcbiAgICAgICAgdmFyIHJlc3VsdHM6IHtba2V5OiBudW1iZXJdOiBSdW5uZXJSZXN1bHR9ID0ge307XHJcblxyXG4gICAgICAgIGZvciAodmFyIGogaW4gdGVzdENhc2UuZW50cmllcykge1xyXG4gICAgICAgICAgICBpZiAoIXRlc3RDYXNlLmVudHJpZXMuaGFzT3duUHJvcGVydHkoaikpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBiZW5jaCA9IG5ldyBCZW5jaG1hcmsodGVzdENhc2UuZW50cmllc1tqXS50aXRsZSwge1xyXG4gICAgICAgICAgICAgICAgaWQ6IGosXHJcbiAgICAgICAgICAgICAgICBhc3luYzogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHNldHVwOiB0ZXN0Q2FzZS5oYXJuZXNzLnNldFVwLFxyXG4gICAgICAgICAgICAgICAgdGVhcmRvd246IHRlc3RDYXNlLmhhcm5lc3MudGVhckRvd24sXHJcbiAgICAgICAgICAgICAgICBmbjogdGVzdENhc2UuZW50cmllc1tqXS5jb2RlLFxyXG4gICAgICAgICAgICAgICAgb25TdGFydDogZnVuY3Rpb24oZTogQmVuY2htYXJrLkV2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJlbmNoUmVzdWx0OiBCZW5jaG1hcmsgPSA8QmVuY2htYXJrPmUudGFyZ2V0O1xyXG4gICAgICAgICAgICAgICAgICAgIFJ1bm5lci5yZW5kZXJSZXN1bHQoYmVuY2hSZXN1bHQuaWQsICdTdGFydGluZyAuLi4nKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBvbkNvbXBsZXRlOiBmdW5jdGlvbihlOiBCZW5jaG1hcmsuRXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgYmVuY2hSZXN1bHQ6IEJlbmNobWFyayA9IDxCZW5jaG1hcms+ZS50YXJnZXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0c1tiZW5jaFJlc3VsdC5pZF0gPSA8UnVubmVyUmVzdWx0PntcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGJlbmNoUmVzdWx0LmlkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogYmVuY2hSZXN1bHQuZXJyb3IgPyBCZW5jaG1hcmsuam9pbihiZW5jaFJlc3VsdC5lcnJvcikgOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcHNQZXJTZWM6IGJlbmNoUmVzdWx0Lmh6LnRvRml4ZWQoYmVuY2hSZXN1bHQuaHogPCAxMDAgPyAyIDogMCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wc1BlclNlY0Zvcm1hdHRlZDogQmVuY2htYXJrLmZvcm1hdE51bWJlcihiZW5jaFJlc3VsdC5oei50b0ZpeGVkKGJlbmNoUmVzdWx0Lmh6IDwgMTAwID8gMiA6IDApKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG06IGJlbmNoUmVzdWx0LnN0YXRzLnJtZS50b0ZpeGVkKDIpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBydW5TYW1wbGVzOiBiZW5jaFJlc3VsdC5zdGF0cy5zYW1wbGUubGVuZ3RoXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICBSdW5uZXIucmVuZGVyUmVzdWx0KGJlbmNoUmVzdWx0LmlkLCByZXN1bHRzW2JlbmNoUmVzdWx0LmlkXS5vcHNQZXJTZWNGb3JtYXR0ZWQgKyAnICgmcGx1c21uOycgKyByZXN1bHRzW2JlbmNoUmVzdWx0LmlkXS5wbSArICcpJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvLyBLZWVwIHRoZSBvcmlnaW5hbCBvcmRlciwgZXZlbiBpZiB0aGUgY29kZSBjb250ZW50IG9yIHRpdGxlIGNoYW5nZXMuXHJcbiAgICAgICAgICAgIGJlbmNoZXMucHVzaChiZW5jaCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgQmVuY2htYXJrLmludm9rZShiZW5jaGVzLCB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiAncnVuJyxcclxuICAgICAgICAgICAgICAgIGFyZ3M6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAvLyAncXVldWVkJzogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIG9uU3RhcnQ6IChlOiBCZW5jaG1hcmsuRXZlbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnU3RhcnRpbmcgYmVuY2htYXJrcyAuLi4nLCBlKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBvbkN5Y2xlOiAoZTogQmVuY2htYXJrLkV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ29uQ3ljbGUgaGVyZS4nLCBlKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBvbkVycm9yOiAoZTogQmVuY2htYXJrLkV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ29uRXJyb3IgaGVyZS4nLCBlKTtcclxuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZFEucmVqZWN0KG5ldyBFcnJvcignUnVubmluZyBzdWl0ZSByZXR1cm5lZCBhbiBlcnJvci4nKSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgb25Db21wbGV0ZTogKGU6IEJlbmNobWFyay5FdmVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdvbkNvbXBsZXRlIGhlcmUuJywgZSwgcmVzdWx0cyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIFJ1bm5lci5yZW5kZXJXaW5uZXJSZXN1bHQoQmVuY2htYXJrLmZpbHRlcihiZW5jaGVzLCAnZmFzdGVzdCcpWzBdLmlkKTtcclxuICAgICAgICAgICAgICAgICAgICBSdW5uZXIucmVuZGVyTG9zZXJSZXN1bHQoQmVuY2htYXJrLmZpbHRlcihiZW5jaGVzLCAnc2xvd2VzdCcpWzBdLmlkKTtcclxuICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZFEucmVzb2x2ZShyZXN1bHRzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSwgMjAwMCk7XHJcblxyXG4gICAgICAgIHJldHVybiBkZWZlcnJlZFEucHJvbWlzZTtcclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgc3RhdGljIHJlbmRlclJlc3VsdChpZDogc3RyaW5nIHwgbnVtYmVyLCB0ZXh0OiBzdHJpbmcpIHtcclxuICAgICAgICB2YXIgJGVsZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGVzdGNhc2UtdGVzdC1yZXN1bHQtdGV4dC0nICsgaWQpO1xyXG4gICAgICAgICRlbGVtLmlubmVySFRNTCA9IHRleHQ7XHJcbiAgICB9O1xyXG5cclxuICAgIHByb3RlY3RlZCBzdGF0aWMgcmVuZGVyV2lubmVyUmVzdWx0KGlkOiBzdHJpbmcgfCBudW1iZXIpIHtcclxuICAgICAgICB2YXIgJGVsZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGVzdGNhc2UtdGVzdC1yZXN1bHQtdGV4dC0nICsgaWQpO1xyXG4gICAgICAgICRlbGVtLmNsYXNzTmFtZSArPSAnIHN1Y2Nlc3MnO1xyXG4gICAgfTtcclxuXHJcbiAgICBwcm90ZWN0ZWQgc3RhdGljIHJlbmRlckxvc2VyUmVzdWx0KGlkOiBzdHJpbmcgfCBudW1iZXIpIHtcclxuICAgICAgICB2YXIgJGVsZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndGVzdGNhc2UtdGVzdC1yZXN1bHQtdGV4dC0nICsgaWQpO1xyXG4gICAgICAgICRlbGVtLmNsYXNzTmFtZSArPSAnIGRhbmdlcic7XHJcbiAgICB9O1xyXG5cclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBSdW5uZXJSZXN1bHQge1xyXG4gICAgaWQ6IG51bWJlcjtcclxuICAgIGVycm9yOiBzdHJpbmc7XHJcbiAgICBvcHNQZXJTZWM6IHN0cmluZztcclxuICAgIG9wc1BlclNlY0Zvcm1hdHRlZDogc3RyaW5nO1xyXG4gICAgcG06IHN0cmluZztcclxuICAgIHJ1blNhbXBsZXM6IG51bWJlcjtcclxufVxyXG4iLCJpbXBvcnQge1V0aWx9IGZyb20gJy4vVXRpbHMnO1xyXG5pbXBvcnQge1J1bm5lclJlc3VsdH0gZnJvbSAnLi9SdW5uZXInO1xyXG5cclxuZXhwb3J0IGNsYXNzIFRlc3RDYXNlIHtcclxuICAgIHByb3RlY3RlZCBfdGl0bGU6IHN0cmluZztcclxuICAgIHByb3RlY3RlZCBfc2x1Zzogc3RyaW5nO1xyXG4gICAgcHJvdGVjdGVkIF9kZXNjcmlwdGlvbjogc3RyaW5nO1xyXG4gICAgcHJvdGVjdGVkIF9zdGF0dXM6IHN0cmluZztcclxuICAgIHByb3RlY3RlZCBfaGFybmVzczogVGVzdENhc2VIYXJuZXNzO1xyXG4gICAgcHJvdGVjdGVkIF9lbnRyaWVzOiBUZXN0Q2FzZUVudHJ5W107XHJcbiAgICBwcm90ZWN0ZWQgX2VudjogVGVzdENhc2VFbnY7XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKHRlc3RDYXNlOiBUZXN0Q2FzZUVudGl0eSkge1xyXG4gICAgICAgIHRoaXMudGl0bGUgPSB0ZXN0Q2FzZS50aXRsZTtcclxuICAgICAgICB0aGlzLnNsdWcgPSB0ZXN0Q2FzZS5zbHVnO1xyXG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSB0ZXN0Q2FzZS5kZXNjcmlwdGlvbjtcclxuICAgICAgICB0aGlzLnN0YXR1cyA9IHRlc3RDYXNlLnN0YXR1cztcclxuICAgICAgICB0aGlzLmhhcm5lc3MgPSB0ZXN0Q2FzZS5oYXJuZXNzO1xyXG4gICAgICAgIHRoaXMuZW50cmllcyA9IHRlc3RDYXNlLmVudHJpZXM7XHJcbiAgICAgICAgdGhpcy5lbnYgPSB0ZXN0Q2FzZS5lbnY7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldCB0aXRsZSh0aXRsZTogc3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy5fdGl0bGUgPSB0aXRsZTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IHRpdGxlKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RpdGxlO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXQgc2x1ZyhzbHVnOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLl9zbHVnID0gc2x1ZztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IHNsdWcoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc2x1ZztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0IGRlc2NyaXB0aW9uKGRlc2NyaXB0aW9uOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLl9kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgZGVzY3JpcHRpb24oKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVzY3JpcHRpb247XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNldCBzdGF0dXMoc3RhdHVzOiBzdHJpbmcpIHtcclxuICAgICAgICB0aGlzLl9zdGF0dXMgPSBzdGF0dXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBzdGF0dXMoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc3RhdHVzO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzZXQgaGFybmVzcyhoYXJuZXNzOiBUZXN0Q2FzZUhhcm5lc3MpIHtcclxuICAgICAgICB0aGlzLl9oYXJuZXNzID0gaGFybmVzcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0IGhhcm5lc3MoKTogVGVzdENhc2VIYXJuZXNzIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5faGFybmVzcztcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0IGVudHJpZXMoZW50cmllczogVGVzdENhc2VFbnRyeVtdKSB7XHJcbiAgICAgICAgdGhpcy5fZW50cmllcyA9IGVudHJpZXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldCBlbnRyaWVzKCk6IFRlc3RDYXNlRW50cnlbXSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2VudHJpZXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGFkZEVudHJ5KGVudHJ5OiBUZXN0Q2FzZUVudHJ5KTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5fZW50cmllc1tlbnRyeS5pZF0gPSBlbnRyeTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVtb3ZlRW50cnkoaWQ6IG51bWJlcik6IHZvaWQge1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLl9lbnRyaWVzW2lkXTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2V0IGVudihlbnY6IFRlc3RDYXNlRW52KSB7XHJcbiAgICAgICAgdGhpcy5fZW52ID0gZW52O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXQgZW52KCk6IFRlc3RDYXNlRW52IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZW52O1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBpc1JlYWR5VG9SdW4oKTogYm9vbGVhbiB7XHJcbiAgICAgICAgcmV0dXJuIChVdGlsLmdldE9iakxlbmd0aCh0aGlzLmVudHJpZXMpID4gMik7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBjcmVhdGUodGVzdENhc2VFbnRpdHk6IFRlc3RDYXNlRW50aXR5KSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBUZXN0Q2FzZSh0ZXN0Q2FzZUVudGl0eSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBjcmVhdGVFbXB0eUVudGl0eSgpOiBUZXN0Q2FzZUVudGl0eSB7XHJcbiAgICAgICAgcmV0dXJuIDxUZXN0Q2FzZUVudGl0eT57XHJcbiAgICAgICAgICAgIHRpdGxlOiAnJyxcclxuICAgICAgICAgICAgc2x1ZzogVXRpbC5yYW5kb21TdHJpbmcoMTApLFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJycsXHJcbiAgICAgICAgICAgIHN0YXR1czogJ3B1YmxpYycsXHJcbiAgICAgICAgICAgIGhhcm5lc3M6IDxUZXN0Q2FzZUhhcm5lc3M+e1xyXG4gICAgICAgICAgICAgICAgaHRtbDogJycsXHJcbiAgICAgICAgICAgICAgICBzZXRVcDogJycsXHJcbiAgICAgICAgICAgICAgICB0ZWFyRG93bjogJydcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZW50cmllczogW1xyXG4gICAgICAgICAgICAgICAgPFRlc3RDYXNlRW50cnk+e2lkOiAxLCB0aXRsZTogJycsIGNvZGU6ICcnfSxcclxuICAgICAgICAgICAgICAgIDxUZXN0Q2FzZUVudHJ5PntpZDogMiwgdGl0bGU6ICcnLCBjb2RlOiAnJ31cclxuICAgICAgICAgICAgXVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBjcmVhdGVFbnRpdHlGcm9tRE9NRWxlbWVudChpZDogc3RyaW5nKTogVGVzdENhc2VFbnRpdHkge1xyXG4gICAgICAgIHZhciAkZWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKTtcclxuICAgICAgICB2YXIgcmVzdWx0ID0gIDx7dGVzdENhc2U6IFRlc3RDYXNlRW50aXR5fT5mb3JtVG9PYmplY3QoJGVsZW0pO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQudGVzdENhc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHN0YXRpYyBjcmVhdGVFbXB0eVRlc3RDYXNlRW50cnkoaWQ6IG51bWJlcikge1xyXG4gICAgICAgIHJldHVybiA8VGVzdENhc2VFbnRyeT57XHJcbiAgICAgICAgICAgIGlkOiBpZCxcclxuICAgICAgICAgICAgdGl0bGU6ICcnLFxyXG4gICAgICAgICAgICBjb2RlOiAnJ1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgVGVzdENhc2VFbnRpdHkge1xyXG4gICAgdGl0bGU6IHN0cmluZztcclxuICAgIHNsdWc6IHN0cmluZztcclxuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmc7XHJcbiAgICBzdGF0dXM6IHN0cmluZztcclxuICAgIGhhcm5lc3M6IFRlc3RDYXNlSGFybmVzcztcclxuICAgIGVudHJpZXM6IFRlc3RDYXNlRW50cnlbXTtcclxuICAgIGVudjogVGVzdENhc2VFbnY7XHJcbn1cclxuXHJcbmludGVyZmFjZSBUZXN0Q2FzZUhhcm5lc3Mge1xyXG4gICAgaHRtbDogc3RyaW5nO1xyXG4gICAgc2V0VXA6IHN0cmluZztcclxuICAgIHRlYXJEb3duOiBzdHJpbmc7XHJcbn1cclxuXHJcbmludGVyZmFjZSBUZXN0Q2FzZUVudHJ5IHtcclxuICAgIGlkOiBudW1iZXI7XHJcbiAgICB0aXRsZTogc3RyaW5nO1xyXG4gICAgY29kZTogc3RyaW5nO1xyXG4gICAgcmVzdWx0cz86IFJ1bm5lclJlc3VsdDtcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBUZXN0Q2FzZUVudiB7XHJcbiAgICBicm93c2VyTmFtZTogc3RyaW5nO1xyXG4gICAgYnJvd3NlclZlcnNpb246IHN0cmluZztcclxuICAgIG9zOiBzdHJpbmc7XHJcbn1cclxuIiwiaW1wb3J0IHtUZXN0Q2FzZX0gZnJvbSAnLi9UZXN0Q2FzZSc7XHJcbmltcG9ydCB7UGFnZX0gZnJvbSAnLi9QYWdlJztcclxuaW1wb3J0IHtQYW5lbH0gZnJvbSAnLi9QYW5lbCc7XHJcbmltcG9ydCB7SHR0cFJlc3BvbnNlSW50ZXJmYWNlfSBmcm9tICcuL0h0dHAnO1xyXG5pbXBvcnQge0FwcH0gZnJvbSAnLi9BcHAnO1xyXG5pbXBvcnQgUHJvbWlzZSA9IFEuUHJvbWlzZTtcclxuXHJcbmV4cG9ydCBjbGFzcyBUb3RhbENoYXJ0UGFuZWwgaW1wbGVtZW50cyBQYW5lbCB7XHJcbiAgICBwcm90ZWN0ZWQgcGFnZTogUGFnZTtcclxuICAgIHByb3RlY3RlZCB0ZXN0Q2FzZTogVGVzdENhc2U7XHJcblxyXG4gICAgY29uc3RydWN0b3IocGFnZTogUGFnZSwgdGVzdENhc2U6IFRlc3RDYXNlKSB7XHJcbiAgICAgICAgdGhpcy5wYWdlID0gcGFnZTtcclxuICAgICAgICB0aGlzLnRlc3RDYXNlID0gdGVzdENhc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGdldERhdGEoKTogUHJvbWlzZTxIdHRwUmVzcG9uc2VJbnRlcmZhY2U+IHtcclxuICAgICAgICByZXR1cm4gQXBwLmh0dHAuZ2V0SlNPTihgJHtBcHAuY29uZmlnLnNlcnZlclVyaX0vdGVzdC8ke3RoaXMudGVzdENhc2Uuc2x1Z30vdG90YWxzL2J5LWJyb3dzZXIuanNvbmApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEB0b2RvIFNpbXBsaWZ5IHRoaXMgYnkgYWRkaW5nIGEgM3JkcGFydHkgY2hhcnQgbGlicmFyeS5cclxuICAgIHB1YmxpYyByZW5kZXIoZGF0YTogVG90YWxCeUJyb3dzZXJbXSkge1xyXG4gICAgICAgIHZhciAkY2hhcnREaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY2hhcnQtZGl2Jyk7XHJcbiAgICAgICAgaWYgKCRjaGFydERpdi5jbGFzc05hbWUgPT09ICdyZW5kZXJlZCcpIHtcclxuICAgICAgICAgICAgdGhpcy5fcmVuZGVyKGRhdGEpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGdvb2dsZS5jaGFydHMubG9hZCgnY3VycmVudCcsIHtwYWNrYWdlczogWydjb3JlY2hhcnQnLCAnYmFyJ119KTtcclxuICAgICAgICAgICAgZ29vZ2xlLmNoYXJ0cy5zZXRPbkxvYWRDYWxsYmFjaygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9yZW5kZXIoZGF0YSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcm90ZWN0ZWQgX3JlbmRlcihkYXRhOiBUb3RhbEJ5QnJvd3NlcltdKSB7XHJcbiAgICAgICAgdmFyICRjaGFydERpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGFydC1kaXYnKTtcclxuICAgICAgICB2YXIgY2hhcnQgPSBuZXcgZ29vZ2xlLnZpc3VhbGl6YXRpb24uQmFyQ2hhcnQoJGNoYXJ0RGl2KTtcclxuXHJcbiAgICAgICAgdmFyIGJyb3dzZXJzOiBhbnlbXSA9IFtdO1xyXG4gICAgICAgIHZhciByZXN1bHRzU2V0OiBhbnlbXSA9IFtdO1xyXG5cclxuICAgICAgICBkYXRhLm1hcChmdW5jdGlvbiAoZW50cnkpIHtcclxuICAgICAgICAgICAgdmFyIGVudHJ5UmVzdWx0czogYW55ID0ge1xyXG4gICAgICAgICAgICAgICAgdGl0bGU6IGVudHJ5LnRpdGxlXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGVudHJ5LnRvdGFscy5mb3JFYWNoKGZ1bmN0aW9uKHRvdGFsKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYnJvd3NlcklkZW50aWZpZXIgPSB0b3RhbC5icm93c2VyTmFtZTtcclxuICAgICAgICAgICAgICAgIGlmIChicm93c2Vycy5pbmRleE9mKGJyb3dzZXJJZGVudGlmaWVyKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICBicm93c2Vycy5wdXNoKGJyb3dzZXJJZGVudGlmaWVyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVudHJ5UmVzdWx0c1ticm93c2VySWRlbnRpZmllcl0gPSBwYXJzZUludCh0b3RhbC5tZXRyaWNWYWx1ZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXN1bHRzU2V0LnB1c2goXy5tYXAoZW50cnlSZXN1bHRzKSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGJyb3dzZXJzLnVuc2hpZnQoJ1RvdGFsJyk7XHJcbiAgICAgICAgcmVzdWx0c1NldC51bnNoaWZ0KGJyb3dzZXJzKTtcclxuXHJcbiAgICAgICAgdmFyIG9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgIGxlZ2VuZDoge1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246ICdib3R0b20nXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGJhcnM6ICdob3Jpem9udGFsJyxcclxuICAgICAgICAgICAgY2hhcnRBcmVhOiB7XHJcbiAgICAgICAgICAgICAgICB3aWR0aDogJzgwJScsXHJcbiAgICAgICAgICAgICAgICAnaGVpZ2h0JzogJzgwJSdcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGNoYXJ0LmRyYXcoXHJcbiAgICAgICAgICAgIGdvb2dsZS52aXN1YWxpemF0aW9uLmFycmF5VG9EYXRhVGFibGUocmVzdWx0c1NldCksXHJcbiAgICAgICAgICAgIG9wdGlvbnNcclxuICAgICAgICApO1xyXG4gICAgICAgICRjaGFydERpdi5jbGFzc05hbWUgPSAncmVuZGVyZWQnO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFRvdGFsQnlCcm93c2VyIHtcclxuICAgIHRpdGxlOiBzdHJpbmc7XHJcbiAgICB0b3RhbHM6IFRvdGFsQnlCcm93c2VyTWV0cmljW107XHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgVG90YWxCeUJyb3dzZXJNZXRyaWMge1xyXG4gICAgYnJvd3Nlck5hbWU6IHN0cmluZztcclxuICAgIG1ldHJpY1R5cGU6IHN0cmluZztcclxuICAgIG1ldHJpY1ZhbHVlOiBzdHJpbmc7XHJcbiAgICBydW5Db3VudDogc3RyaW5nO1xyXG59XHJcbiIsImV4cG9ydCBjbGFzcyBVdGlsIHtcclxuICAgIHB1YmxpYyBzdGF0aWMgcmFuZG9tU3RyaW5nKGxlbjogbnVtYmVyLCBjaGFyU2V0Pzogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgICBjaGFyU2V0ID0gY2hhclNldCB8fCAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODknO1xyXG4gICAgICAgIHZhciByYW5kb21TdHJpbmcgPSAnJztcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciByYW5kb21Qb3ogPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBjaGFyU2V0Lmxlbmd0aCk7XHJcbiAgICAgICAgICAgIHJhbmRvbVN0cmluZyArPSBjaGFyU2V0LnN1YnN0cmluZyhyYW5kb21Qb3osIHJhbmRvbVBveiArIDEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmFuZG9tU3RyaW5nO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IHRoZSByZWFsIG51bWJlciBvZiBwcm9wZXJ0aWVzIGZyb20gYW4gb2JqZWN0LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7b2JqZWN0fSBvXHJcbiAgICAgKiBAcmV0dXJucyB7bnVtYmVyfVxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgc3RhdGljIGdldE9iakxlbmd0aChvOiBPYmplY3QpOiBudW1iZXIge1xyXG4gICAgICAgIGlmICh0eXBlb2YgbyAhPT0gJ29iamVjdCcgfHwgbyA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBsOiBudW1iZXIgPSAwO1xyXG4gICAgICAgIHZhciBrOiBhbnk7XHJcblxyXG4gICAgICAgIGlmICh0eXBlb2YgT2JqZWN0LmtleXMgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgbCA9IE9iamVjdC5rZXlzKG8pLmxlbmd0aDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBmb3IgKGsgaW4gbykge1xyXG4gICAgICAgICAgICAgICAgaWYgKG8uaGFzT3duUHJvcGVydHkoaykpIHtcclxuICAgICAgICAgICAgICAgICAgICBsKys7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBsO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzdGF0aWMgZXNjYXBlRm9yUmVnZXgoc3RyOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBzdHIucmVwbGFjZSgvWy1cXC9cXFxcXiQqKz8uKCl8W1xcXV0vZywgJ1xcXFwkJicpO1xyXG4gICAgfVxyXG59XHJcbiIsImltcG9ydCB7QXBwfSBmcm9tICcuL0FwcCc7XHJcblxyXG5sZXQgc2VydmVyVXJpID0gd2luZG93LmxvY2F0aW9uLmhvc3QgPT09ICdqc2JlbmNoLm9yZycgPyAnaHR0cDovL2FwaS5qc2JlbmNoLm9yZy92MicgOiAnaHR0cDovL2FwaS1kZXYuanNiZW5jaC5vcmcvdjInO1xyXG5sZXQgY2xpZW50VXJpID0gJ2h0dHA6Ly8nICsgd2luZG93LmxvY2F0aW9uLmhvc3Q7XHJcblxyXG5uZXcgQXBwKHtcclxuICAgIHNlcnZlclVyaTogc2VydmVyVXJpLFxyXG4gICAgY2xpZW50VXJpOiAgY2xpZW50VXJpXHJcbn0pO1xyXG4iXX0=
